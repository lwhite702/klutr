module.exports=[66083,a=>{"use strict";var b=void 0,c="undefined"!=typeof globalThis?globalThis:b,d=Array.prototype,e=d.forEach,f=d.indexOf,g=null==c?void 0:c.navigator,h=null==c?void 0:c.document,i=null==c?void 0:c.location,j=null==c?void 0:c.fetch,k=null!=c&&c.XMLHttpRequest&&"withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:void 0,l=null==c?void 0:c.AbortController,m=null==g?void 0:g.userAgent,n=null!=b?b:{},o={DEBUG:!1,LIB_VERSION:"1.290.0"};function p(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function q(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function g(a){p(f,d,e,g,h,"next",a)}function h(a){p(f,d,e,g,h,"throw",a)}g(void 0)})}}function r(){return(r=Object.assign.bind()).apply(null,arguments)}function s(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}var t=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercel-screenshot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],u=function(a,b){if(void 0===b&&(b=[]),!a)return!1;var c=a.toLowerCase();return t.concat(b).some(a=>{var b=a.toLowerCase();return -1!==c.indexOf(b)})},v=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];function w(a,b){return -1!==a.indexOf(b)}var x=function(a){return a.trim()},y=function(a){return a.replace(/^\$/,"")},z=Array.isArray,A=Object.prototype,B=A.hasOwnProperty,C=A.toString,D=z||function(a){return"[object Array]"===C.call(a)},E=a=>"function"==typeof a,F=a=>a===Object(a)&&!D(a),G=a=>{if(F(a)){for(var b in a)if(B.call(a,b))return!1;return!0}return!1},H=a=>void 0===a,I=a=>"[object String]"==C.call(a),J=a=>I(a)&&0===a.trim().length,K=a=>null===a,L=a=>H(a)||K(a),M=a=>"[object Number]"==C.call(a),N=a=>"[object Boolean]"===C.call(a),O=a=>w(v,a);function P(a){return null===a||"object"!=typeof a}function Q(a,b){return Object.prototype.toString.call(a)==="[object "+b+"]"}function R(a){return!H(Event)&&function(a,b){try{return a instanceof b}catch(a){return!1}}(a,Event)}var S=[!0,"true",1,"1","yes"],T=[!1,"false",0,"0","no"];function U(a,b,c,d,e){return b>c&&(d.warn("min cannot be greater than max."),b=c),M(a)?a>c?(d.warn(" cannot be  greater than max: "+c+". Using max value instead."),c):a<b?(d.warn(" cannot be less than min: "+b+". Using min value instead."),b):a:(d.warn(" must be a number. using max or fallback. max: "+c+", fallback: "+e),U(e||c,b,c,d))}class V{constructor(a){this.t={},this.i=a.i,this.o=U(a.bucketSize,0,100,a.h),this.m=U(a.refillRate,0,this.o,a.h),this.$=U(a.refillInterval,0,864e5,a.h)}S(a,b){var c=Math.floor((b-a.lastAccess)/this.$);if(c>0){var d=c*this.m;a.tokens=Math.min(a.tokens+d,this.o),a.lastAccess=a.lastAccess+c*this.$}}consumeRateLimit(a){var b,c=Date.now(),d=String(a),e=this.t[d];return e?this.S(e,c):(e={tokens:this.o,lastAccess:c},this.t[d]=e),0===e.tokens||(e.tokens--,0===e.tokens&&(null==(b=this.i)||b.call(this,a)),0===e.tokens)}stop(){this.t={}}}var W,X,Y,Z=a=>a instanceof Error;function $(a,b,c,d){var e={platform:"web:javascript",filename:a,function:"<anonymous>"===b?"?":b,in_app:!0};return H(c)||(e.lineno=c),H(d)||(e.colno=d),e}var _=(a,b)=>{var c=-1!==a.indexOf("safari-extension"),d=-1!==a.indexOf("safari-web-extension");return c||d?[-1!==a.indexOf("@")?a.split("@")[0]:"?",c?"safari-extension:"+b:"safari-web-extension:"+b]:[a,b]},aa=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ab=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ac=/\((\S*)(?::(\d+))(?::(\d+))\)/,ad=a=>{var b=aa.exec(a);if(b){var[,c,d,e]=b;return $(c,"?",+d,+e)}var f=ab.exec(a);if(f){if(f[2]&&0===f[2].indexOf("eval")){var g=ac.exec(f[2]);g&&(f[2]=g[1],f[3]=g[2],f[4]=g[3])}var[h,i]=_(f[1]||"?",f[2]);return $(i,h,f[3]?+f[3]:void 0,f[4]?+f[4]:void 0)}},ae=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,af=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,ag=a=>{var b=ae.exec(a);if(b){if(b[3]&&b[3].indexOf(" > eval")>-1){var c=af.exec(b[3]);c&&(b[1]=b[1]||"eval",b[3]=c[1],b[4]=c[2],b[5]="")}var d=b[3],e=b[1]||"?";return[e,d]=_(e,d),$(d,e,b[4]?+b[4]:void 0,b[5]?+b[5]:void 0)}},ah=/\(error: (.*)\)/;class ai{constructor(a,b,c){void 0===a&&(a=[]),void 0===b&&(b=[]),void 0===c&&(c=[]),this.coercers=a,this.modifiers=c,this.stackParser=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a,c){void 0===c&&(c=0);for(var d=[],e=a.split("\n"),f=c;f<e.length;f++){var g=e[f];if(!(g.length>1024)){var h=ah.test(g)?g.replace(ah,"$1"):g;if(!h.match(/\S*Error: /)){for(var i of b){var j=i(h);if(j){d.push(j);break}}if(d.length>=50)break}}}if(!d.length)return[];var k=Array.from(d);return k.reverse(),k.slice(0,50).map(a=>r({},a,{filename:a.filename||(k[k.length-1]||{}).filename,function:a.function||"?"}))}}(...b)}buildFromUnknown(a,b){void 0===b&&(b={});var c=b&&b.mechanism||{handled:!0,type:"generic"},d=this.buildCoercingContext(c,b,0).apply(a),e=this.buildParsingContext(),f=this.parseStacktrace(d,e);return{$exception_list:this.convertToExceptionList(f,c),$exception_level:"error"}}modifyFrames(a){var b=this;return q(function*(){for(var c of a)c.stacktrace&&c.stacktrace.frames&&D(c.stacktrace.frames)&&(c.stacktrace.frames=yield b.applyModifiers(c.stacktrace.frames));return a})()}coerceFallback(a){var b;return{type:"Error",value:"Unknown error",stack:null==(b=a.syntheticException)?void 0:b.stack,synthetic:!0}}parseStacktrace(a,b){var c,d;return null!=a.cause&&(c=this.parseStacktrace(a.cause,b)),""!=a.stack&&null!=a.stack&&(d=this.applyChunkIds(this.stackParser(a.stack,+!!a.synthetic),b.chunkIdMap)),r({},a,{cause:c,stack:d})}applyChunkIds(a,b){return a.map(a=>(a.filename&&b&&(a.chunk_id=b[a.filename]),a))}applyCoercers(a,b){for(var c of this.coercers)if(c.match(a))return c.coerce(a,b);return this.coerceFallback(b)}applyModifiers(a){var b=this;return q(function*(){var c=a;for(var d of b.modifiers)c=yield d(c);return c})()}convertToExceptionList(a,b){var c,d,e,f={type:a.type,value:a.value,mechanism:{type:null!=(c=b.type)?c:"generic",handled:null==(d=b.handled)||d,synthetic:null!=(e=a.synthetic)&&e}};a.stack&&(f.stacktrace={type:"raw",frames:a.stack});var g=[f];return null!=a.cause&&g.push(...this.convertToExceptionList(a.cause,r({},b,{handled:!0}))),g}buildParsingContext(){return{chunkIdMap:function(a){var b=globalThis._posthogChunkIds;if(b){var c=Object.keys(b);return Y&&c.length===X||(X=c.length,Y=c.reduce((c,d)=>{W||(W={});var e=W[d];if(e)c[e[0]]=e[1];else for(var f=a(d),g=f.length-1;g>=0;g--){var h=f[g],i=null==h?void 0:h.filename,j=b[d];if(i&&j){c[i]=j,W[d]=[i,j];break}}return c},{})),Y}}(this.stackParser)}}buildCoercingContext(a,b,c){void 0===c&&(c=0);var d=(c,d)=>{if(d<=4){var e=this.buildCoercingContext(a,b,d);return this.applyCoercers(c,e)}};return r({},b,{syntheticException:0==c?b.syntheticException:void 0,mechanism:a,apply:a=>d(a,c),next:a=>d(a,c+1)})}}class aj{match(a){return this.isDOMException(a)||this.isDOMError(a)}coerce(a,b){var c=I(a.stack);return{type:this.getType(a),value:this.getValue(a),stack:c?a.stack:void 0,cause:a.cause?b.next(a.cause):void 0,synthetic:!1}}getType(a){return this.isDOMError(a)?"DOMError":"DOMException"}getValue(a){var b=a.name||(this.isDOMError(a)?"DOMError":"DOMException");return a.message?b+": "+a.message:b}isDOMException(a){return Q(a,"DOMException")}isDOMError(a){return Q(a,"DOMError")}}class ak{match(a){return a instanceof Error}coerce(a,b){return{type:this.getType(a),value:this.getMessage(a,b),stack:this.getStack(a),cause:a.cause?b.next(a.cause):void 0,synthetic:!1}}getType(a){return a.name||a.constructor.name}getMessage(a,b){var c=a.message;return c.error&&"string"==typeof c.error.message?String(c.error.message):String(c)}getStack(a){return a.stacktrace||a.stack||void 0}}class al{constructor(){}match(a){return Q(a,"ErrorEvent")&&null!=a.error}coerce(a,b){var c;return b.apply(a.error)||{type:"ErrorEvent",value:a.message,stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}var am=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;class an{match(a){return"string"==typeof a}coerce(a,b){var c,[d,e]=this.getInfos(a);return{type:null!=d?d:"Error",value:null!=e?e:a,stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}getInfos(a){var b="Error",c=a,d=a.match(am);return d&&(b=d[1],c=d[2]),[b,c]}}var ao=["fatal","error","warning","log","info","debug"];function ap(a,b){void 0===b&&(b=40);var c=Object.keys(a);if(c.sort(),!c.length)return"[object has no keys]";for(var d=c.length;d>0;d--){var e=c.slice(0,d).join(", ");if(!(e.length>b))return d===c.length||e.length<=b?e:e.slice(0,b)+"..."}return""}class aq{match(a){return"object"==typeof a&&null!==a}coerce(a,b){var c,d=this.getErrorPropertyFromObject(a);return d?b.apply(d):{type:this.getType(a),value:this.getValue(a),stack:null==(c=b.syntheticException)?void 0:c.stack,level:this.isSeverityLevel(a.level)?a.level:"error",synthetic:!0}}getType(a){return R(a)?a.constructor.name:"Error"}getValue(a){if("name"in a&&"string"==typeof a.name){var b="'"+a.name+"' captured as exception";return"message"in a&&"string"==typeof a.message&&(b+=" with message: '"+a.message+"'"),b}if("message"in a&&"string"==typeof a.message)return a.message;var c=this.getObjectClassName(a);return(c&&"Object"!==c?"'"+c+"'":"Object")+" captured as exception with keys: "+ap(a)}isSeverityLevel(a){return I(a)&&!J(a)&&ao.indexOf(a)>=0}getErrorPropertyFromObject(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b)){var c=a[b];if(Z(c))return c}}getObjectClassName(a){try{var b=Object.getPrototypeOf(a);return b?b.constructor.name:void 0}catch(a){return}}}class ar{match(a){return R(a)}coerce(a,b){var c,d=a.constructor.name;return{type:d,value:d+" captured as exception with keys: "+ap(a),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}class as{match(a){return P(a)}coerce(a,b){var c;return{type:"Error",value:"Primitive value captured as exception: "+String(a),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}}}class at{match(a){return Q(a,"PromiseRejectionEvent")}coerce(a,b){var c,d=this.getUnhandledRejectionReason(a);return P(d)?{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(d),stack:null==(c=b.syntheticException)?void 0:c.stack,synthetic:!0}:b.apply(d)}getUnhandledRejectionReason(a){if(P(a))return a;try{if("reason"in a)return a.reason;if("detail"in a&&"reason"in a.detail)return a.detail.reason}catch(a){}return a}}var au=a=>{var c={k:function(a){b&&(o.DEBUG||n.POSTHOG_DEBUG)&&!H(b.console)&&b.console},info:function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];c.k("log",...b)},warn:function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];c.k("warn",...b)},error:function(){for(var a=arguments.length,b=Array(a),d=0;d<a;d++)b[d]=arguments[d];c.k("error",...b)},critical:function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];console.error(a,...c)},uninitializedWarning:a=>{c.error("You must initialize PostHog before calling "+a)},createLogger:b=>au(a+" "+b)};return c},av=au("[PostHog.js]"),aw=av.createLogger,ax=aw("[ExternalScriptsLoader]"),ay=(a,b,c)=>{if(a.config.disable_external_dependency_loading)return ax.warn(b+" was requested but loading of external scripts is disabled."),c("Loading of external scripts is disabled");var d=null==h?void 0:h.querySelectorAll("script");if(d){for(var e,f=0;f<d.length;f++)if(e=function(){if(d[f].src===b){var a=d[f];return a.__posthog_loading_callback_fired?{v:c()}:(a.addEventListener("load",b=>{a.__posthog_loading_callback_fired=!0,c(void 0,b)}),a.onerror=a=>c(a),{v:void 0})}}())return e.v}var g=()=>{if(!h)return c("document not found");var d=h.createElement("script");if(d.type="text/javascript",d.crossOrigin="anonymous",d.src=b,d.onload=a=>{d.__posthog_loading_callback_fired=!0,c(void 0,a)},d.onerror=a=>c(a),a.config.prepare_external_dependency_script&&(d=a.config.prepare_external_dependency_script(d)),!d)return c("prepare_external_dependency_script returned null");var e,f=h.querySelectorAll("body > script");f.length>0?null==(e=f[0].parentNode)||e.insertBefore(d,f[0]):h.body.appendChild(d)};null!=h&&h.body?g():null==h||h.addEventListener("DOMContentLoaded",g)};n.__PosthogExtensions__=n.__PosthogExtensions__||{},n.__PosthogExtensions__.loadExternalDependency=(a,b,c)=>{var d="/static/"+b+".js?v="+a.version;"remote-config"===b&&(d="/array/"+a.config.token+"/config.js"),"toolbar"===b&&(d=d+"&t="+3e5*Math.floor(Date.now()/3e5));var e=a.requestRouter.endpointFor("assets",d);ay(a,e,c)},n.__PosthogExtensions__.loadSiteApp=(a,b,c)=>{var d=a.requestRouter.endpointFor("api",b);ay(a,d,c)};var az={};function aA(a,b,c){if(D(a)){if(e&&a.forEach===e)a.forEach(b,c);else if("length"in a&&a.length===+a.length){for(var d=0,f=a.length;d<f;d++)if(d in a&&b.call(c,a[d],d)===az)return}}}function aB(a,b,c){if(!L(a)){if(D(a))return aA(a,b,c);if(a instanceof FormData){for(var d of a.entries())if(b.call(c,d[1],d[0])===az)return}else for(var e in a)if(B.call(a,e)&&b.call(c,a[e],e)===az)return}}var aC=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return aA(c,function(b){for(var c in b)void 0!==b[c]&&(a[c]=b[c])}),a},aD=function(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return aA(c,function(b){aA(b,function(b){a.push(b)})}),a};function aE(a){for(var b=Object.keys(a),c=b.length,d=Array(c);c--;)d[c]=[b[c],a[b[c]]];return d}var aF=function(a){return function(){try{for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return a.apply(this,c)}catch(a){av.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),av.critical(a)}}},aG=function(a){var b={};return aB(a,function(a,c){(I(a)&&a.length>0||M(a))&&(b[c]=a)}),b},aH=["herokuapp.com","vercel.app","netlify.app"];function aI(a,b){for(var c=0;c<a.length;c++)if(b(a[c]))return a[c]}function aJ(a,b,c,d){var{capture:e=!1,passive:f=!0}=null!=d?d:{};null==a||a.addEventListener(b,c,{capture:e,passive:f})}var aK="$people_distinct_id",aL="__alias",aM="__timers",aN="$autocapture_disabled_server_side",aO="$heatmaps_enabled_server_side",aP="$exception_capture_enabled_server_side",aQ="$error_tracking_suppression_rules",aR="$error_tracking_capture_extension_exceptions",aS="$web_vitals_enabled_server_side",aT="$dead_clicks_enabled_server_side",aU="$web_vitals_allowed_metrics",aV="$session_recording_remote_config",aW="$sesid",aX="$session_is_sampled",aY="$enabled_feature_flags",aZ="$early_access_features",a$="$feature_flag_details",a_="$stored_person_properties",a0="$stored_group_properties",a1="$surveys",a2="$surveys_activated",a3="$flag_call_reported",a4="$user_state",a5="$client_session_props",a6="$capture_rate_limit",a7="$initial_campaign_params",a8="$initial_referrer_info",a9="$initial_person_info",ba="$epp",bb="__POSTHOG_TOOLBAR__",bc="$posthog_cookieless",bd=[aK,aL,"__cmpns",aM,"$session_recording_enabled_server_side",aO,aW,aY,aQ,a4,aZ,a$,a0,a_,a1,a3,a5,a6,a7,a8,ba,a9];function be(a){return a instanceof Element&&(a.id===bb||!(null==a.closest||!a.closest(".toolbar-global-fade-container")))}function bf(a){return!!a&&1===a.nodeType}function bg(a,b){return!!a&&!!a.tagName&&a.tagName.toLowerCase()===b.toLowerCase()}function bh(a){return!!a&&3===a.nodeType}function bi(a){return a?x(a).split(/\s+/):[]}function bj(a){var b="";switch(typeof a.className){case"string":b=a.className;break;case"object":b=(a.className&&"baseVal"in a.className?a.className.baseVal:null)||a.getAttribute("class")||"";break;default:b=""}return bi(b)}function bk(a){return L(a)?null:x(a).split(/(\s+)/).filter(a=>bx(a)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function bl(a){var b="";return bp(a)&&!bq(a)&&a.childNodes&&a.childNodes.length&&aB(a.childNodes,function(a){var c;bh(a)&&a.textContent&&(b+=null!=(c=bk(a.textContent))?c:"")}),x(b)}function bm(a){var b;return H(a.target)?a.srcElement||null:null!=(b=a.target)&&b.shadowRoot?a.composedPath()[0]||null:a.target||null}var bn=["a","button","form","input","select","textarea","label"],bo=a=>!a||bg(a,"html")||!bf(a);function bp(a){for(var b=a;b.parentNode&&!bg(b,"body");b=b.parentNode){var c=bj(b);if(w(c,"ph-sensitive")||w(c,"ph-no-capture"))return!1}if(w(bj(a),"ph-include"))return!0;var d=a.type||"";if(I(d))switch(d.toLowerCase()){case"hidden":case"password":return!1}var e=a.name||a.id||"";return!(I(e)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(e.replace(/[^a-zA-Z0-9]/g,"")))}function bq(a){return!!(bg(a,"input")&&!["button","checkbox","submit","reset"].includes(a.type)||bg(a,"select")||bg(a,"textarea")||"true"===a.getAttribute("contenteditable"))}var br="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",bs=RegExp("^(?:"+br+")$"),bt=new RegExp(br),bu="\\d{3}-?\\d{2}-?\\d{4}",bv=RegExp("^("+bu+")$"),bw=RegExp("("+bu+")");function bx(a,b){return void 0===b&&(b=!0),!(L(a)||I(a)&&(a=x(a),(b?bs:bt).test((a||"").replace(/[- ]/g,""))||(b?bv:bw).test(a)))&&!0}function by(a){var b=bl(a);return bx(b=(b+" "+function a(b){var c="";return b&&b.childNodes&&b.childNodes.length&&aB(b.childNodes,function(b){var d;if(b&&"span"===(null==(d=b.tagName)?void 0:d.toLowerCase()))try{var e=bl(b);c=(c+" "+e).trim(),b.childNodes&&b.childNodes.length&&(c=(c+" "+a(b)).trim())}catch(a){av.error("[AutoCapture]",a)}}),c}(a)).trim())?b:""}function bz(a){return a.replace(/"|\\"/g,'\\"')}class bA{constructor(){this.clicks=[]}isRageClick(a,b,c){var d=this.clicks[this.clicks.length-1];if(d&&Math.abs(a-d.x)+Math.abs(b-d.y)<30&&c-d.timestamp<1e3){if(this.clicks.push({x:a,y:b,timestamp:c}),3===this.clicks.length)return!0}else this.clicks=[{x:a,y:b,timestamp:c}];return!1}}var bB="$copy_autocapture",bC=((bO={}).GZipJS="gzip-js",bO.Base64="base64",bO),bD=a=>{var b=null==h?void 0:h.createElement("a");return H(b)?null:(b.href=a,b)},bE=function(a,b){void 0===b&&(b="&");var c,d,e=[];return aB(a,function(a,b){H(a)||H(b)||"undefined"===b||(c=encodeURIComponent(a instanceof File?a.name:a.toString()),d=encodeURIComponent(b),e[e.length]=d+"="+c)}),e.join(b)},bF=function(a,b){for(var c,d=((a.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),e=0;e<d.length;e++){var f=d[e].split("=");if(f[0]===b){c=f;break}}if(!D(c)||c.length<2)return"";var g=c[1];try{g=decodeURIComponent(g)}catch(a){av.error("Skipping decoding for malformed query param: "+g)}return g.replace(/\+/g," ")},bG=function(a,b,c){if(!a||!b||!b.length)return a;for(var d=a.split("#"),e=d[0]||"",f=d[1],g=e.split("?"),h=g[1],i=g[0],j=(h||"").split("&"),k=[],l=0;l<j.length;l++){var m=j[l].split("=");D(m)&&(b.includes(m[0])?k.push(m[0]+"="+c):k.push(j[l]))}var n=i;return null!=h&&(n+="?"+k.join("&")),null!=f&&(n+="#"+f),n},bH=function(a,b){var c=a.match(RegExp(b+"=([^&]*)"));return c?c[1]:null},bI=aw("[AutoCapture]");function bJ(a,b){return b.length>a?b.slice(0,a)+"...":b}class bK{constructor(a){this.P=!1,this.T=null,this.rageclicks=new bA,this.I=!1,this.instance=a,this.R=null}get C(){var a,b,c=F(this.instance.config.autocapture)?this.instance.config.autocapture:{};return c.url_allowlist=null==(a=c.url_allowlist)?void 0:a.map(a=>new RegExp(a)),c.url_ignorelist=null==(b=c.url_ignorelist)?void 0:b.map(a=>new RegExp(a)),c}O(){this.isBrowserSupported()||bI.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.P&&(this.O(),this.P=!0)}onRemoteConfig(a){a.elementsChainAsString&&(this.I=a.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[aN]:!!a.autocapture_opt_out}),this.T=!!a.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(a){this.R=a}getElementSelectors(a){var b,c=[];return null==(b=this.R)||b.forEach(b=>{var d=null==h?void 0:h.querySelectorAll(b);null==d||d.forEach(d=>{a===d&&c.push(b)})}),c}get isEnabled(){var a,b,c=null==(a=this.instance.persistence)?void 0:a.props[aN];if(K(this.T)&&!N(c)&&!this.instance.M())return!1;var d=null!=(b=this.T)?b:!!c;return!!this.instance.config.autocapture&&!d}F(a,c){if(void 0===c&&(c="$autocapture"),this.isEnabled){var d,e=bm(a);bh(e)&&(e=e.parentNode||null),"$autocapture"===c&&"click"===a.type&&a instanceof MouseEvent&&this.instance.config.rageclick&&null!=(d=this.rageclicks)&&d.isRageClick(a.clientX,a.clientY,(new Date).getTime())&&function(a,c){if(!b||bo(a))return!1}(e,this.instance.config.rageclick)&&this.F(a,"$rageclick");if(e&&function(a,c,d,e,f){if(void 0===d&&(d=void 0),!b||bo(a))return!1}(e,0,this.C,0,0)){var{props:f,explicitNoCapture:g}=function(a,c){for(var d,e,{e:f,maskAllElementAttributes:g,maskAllText:h,elementAttributeIgnoreList:i,elementsChainAsString:j}=c,k=[a],l=a;l.parentNode&&!bg(l,"body");)(m=l.parentNode)&&11===m.nodeType?(k.push(l.parentNode.host),l=l.parentNode.host):(k.push(l.parentNode),l=l.parentNode);var m,n,o=[],p={},q=!1,s=!1;if(aB(k,a=>{var b=bp(a);"a"===a.tagName.toLowerCase()&&(q=a.getAttribute("href"),q=b&&q&&bx(q)&&q),w(bj(a),"ph-no-capture")&&(s=!0),o.push(function(a,b,c,d){var e=a.tagName.toLowerCase(),f={tag_name:e};bn.indexOf(e)>-1&&!c&&("a"===e.toLowerCase()||"button"===e.toLowerCase()?f.$el_text=bJ(1024,by(a)):f.$el_text=bJ(1024,bl(a)));var g=bj(a);g.length>0&&(f.classes=g.filter(function(a){return""!==a})),aB(a.attributes,function(c){var e;if((!bq(a)||-1!==["name","id","class","aria-label"].indexOf(c.name))&&(null==d||!d.includes(c.name))&&!b&&bx(c.value)&&(!I(e=c.name)||"_ngcontent"!==e.substring(0,10)&&"_nghost"!==e.substring(0,7))){var g=c.value;"class"===c.name&&(g=bi(g).join(" ")),f["attr__"+c.name]=bJ(1024,g)}});for(var h=1,i=1,j=a;j=function(a){if(a.previousElementSibling)return a.previousElementSibling;var b=a;do b=b.previousSibling;while(b&&!bf(b))return b}(j);)h++,j.tagName===a.tagName&&i++;return f.nth_child=h,f.nth_of_type=i,f}(a,g,h,i)),aC(p,function(a){if(!bp(a))return{};var b={};return aB(a.attributes,function(a){if(a.name&&0===a.name.indexOf("data-ph-capture-attribute")){var c=a.name.replace("data-ph-capture-attribute-",""),d=a.value;c&&d&&bx(d)&&(b[c]=d)}}),b}(a))}),s)return{props:{},explicitNoCapture:s};if(h||("a"===a.tagName.toLowerCase()||"button"===a.tagName.toLowerCase()?o[0].$el_text=by(a):o[0].$el_text=bl(a)),q){o[0].attr__href=q;var t,u,v=null==(t=bD(q))?void 0:t.host,x=null==b||null==(u=b.location)?void 0:u.host;v&&x&&v!==x&&(n=q)}return{props:aC({$event_type:f.type,$ce_version:1},j?{}:{$elements:o},{$elements_chain:o.map(a=>{var b,c,d,e={text:null==(c=a.$el_text)?void 0:c.slice(0,400),tag_name:a.tag_name,href:null==(d=a.attr__href)?void 0:d.slice(0,2048),attr_class:(b=a.attr__class)?D(b)?b:bi(b):void 0,attr_id:a.attr__id,nth_child:a.nth_child,nth_of_type:a.nth_of_type,attributes:{}};return aE(a).filter(a=>{var[b]=a;return 0===b.indexOf("attr__")}).forEach(a=>{var[b,c]=a;return e.attributes[b]=c}),e}).map(a=>{var b,c,d="";if(a.tag_name&&(d+=a.tag_name),a.attr_class)for(var e of(a.attr_class.sort(),a.attr_class))d+="."+e.replace(/"/g,"");var f=r({},a.text?{text:a.text}:{},{"nth-child":null!=(b=a.nth_child)?b:0,"nth-of-type":null!=(c=a.nth_of_type)?c:0},a.href?{href:a.href}:{},a.attr_id?{attr_id:a.attr_id}:{},a.attributes),g={};return aE(f).sort((a,b)=>{var[c]=a,[d]=b;return c.localeCompare(d)}).forEach(a=>{var[b,c]=a;return g[bz(b.toString())]=bz(c.toString())}),d+=":",d+=aE(g).map(a=>{var[b,c]=a;return b+'="'+c+'"'}).join("")}).join(";")},null!=(d=o[0])&&d.$el_text?{$el_text:null==(e=o[0])?void 0:e.$el_text}:{},n&&"click"===f.type?{$external_click_url:n}:{},p)}}(e,{e:a,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.C.element_attribute_ignorelist,elementsChainAsString:this.I});if(g)return!1;var h=this.getElementSelectors(e);if(h&&h.length>0&&(f.$element_selectors=h),c===bB){var i,j=bk(null==b||null==(i=b.getSelection())?void 0:i.toString()),k=a.type||"clipboard";if(!j)return!1;f.$selected_content=j,f.$copy_type=k}return this.instance.capture(c,f),!0}}}isBrowserSupported(){return E(null==h?void 0:h.querySelectorAll)}}Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)}),Number.isInteger||(Number.isInteger=function(a){return M(a)&&isFinite(a)&&Math.floor(a)===a});var bL="0123456789abcdef";class bM{constructor(a){if(this.bytes=a,16!==a.length)throw TypeError("not 128-bit length")}static fromFieldsV7(a,b,c,d){if(!Number.isInteger(a)||!Number.isInteger(b)||!Number.isInteger(c)||!Number.isInteger(d)||a<0||b<0||c<0||d<0||a>0xffffffffffff||b>4095||c>0x3fffffff||d>0xffffffff)throw RangeError("invalid field value");var e=new Uint8Array(16);return e[0]=a/0x10000000000,e[1]=a/0x100000000,e[2]=a/0x1000000,e[3]=a/65536,e[4]=a/256,e[5]=a,e[6]=112|b>>>8,e[7]=b,e[8]=128|c>>>24,e[9]=c>>>16,e[10]=c>>>8,e[11]=c,e[12]=d>>>24,e[13]=d>>>16,e[14]=d>>>8,e[15]=d,new bM(e)}toString(){for(var a="",b=0;b<this.bytes.length;b++)a=a+bL.charAt(this.bytes[b]>>>4)+bL.charAt(15&this.bytes[b]),3!==b&&5!==b&&7!==b&&9!==b||(a+="-");if(36!==a.length)throw Error("Invalid UUIDv7 was generated");return a}clone(){return new bM(this.bytes.slice(0))}equals(a){return 0===this.compareTo(a)}compareTo(a){for(var b=0;b<16;b++){var c=this.bytes[b]-a.bytes[b];if(0!==c)return Math.sign(c)}return 0}}class bN{constructor(){this.A=0,this.D=0,this.j=new bR}generate(){var a=this.generateOrAbort();if(H(a)){this.A=0;var b=this.generateOrAbort();if(H(b))throw Error("Could not generate UUID after timestamp reset");return b}return a}generateOrAbort(){var a=Date.now();if(a>this.A)this.A=a,this.L();else{if(!(a+1e4>this.A))return;this.D++,this.D>0x3ffffffffff&&(this.A++,this.L())}return bM.fromFieldsV7(this.A,Math.trunc(this.D/0x40000000),0x3fffffff&this.D,this.j.nextUint32())}L(){this.D=1024*this.j.nextUint32()+(1023&this.j.nextUint32())}}var bO,bP,bQ=a=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw Error("no cryptographically strong RNG available");for(var b=0;b<a.length;b++)a[b]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return a};b&&!H(b.crypto)&&crypto.getRandomValues&&(bQ=a=>crypto.getRandomValues(a));class bR{constructor(){this.N=new Uint32Array(8),this.U=1/0}nextUint32(){return this.U>=this.N.length&&(bQ(this.N),this.U=0),this.N[this.U++]}}var bS=()=>bT().toString(),bT=()=>(bP||(bP=new bN)).generate(),bU="",bV=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,bW={H:()=>!!h,B:function(a){av.error("cookieStore error: "+a)},q:function(a){if(h){try{for(var b=a+"=",c=h.cookie.split(";").filter(a=>a.length),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return decodeURIComponent(e.substring(b.length,e.length))}}catch(a){}return null}},W:function(a){var b;try{b=JSON.parse(bW.q(a))||{}}catch(a){}return b},G:function(a,b,c,d,e){if(h)try{var f="",g="",i=function(a,b){if(b){var c=function(a,b){if(void 0===b&&(b=h),bU)return bU;if(!b||["localhost","127.0.0.1"].includes(a))return"";for(var c=a.split("."),d=Math.min(c.length,8),e="dmn_chk_"+bS();!bU&&d--;){var f=c.slice(d).join("."),g=e+"=1;domain=."+f+";path=/";b.cookie=g+";max-age=3",b.cookie.includes(e)&&(b.cookie=g+";max-age=0",bU=f)}return bU}(a);if(!c){var d,e=(d=a.match(bV))?d[0]:"";e!==c&&av.info("Warning: cookie subdomain discovery mismatch",e,c),c=e}return c?"; domain=."+c:""}return""}(h.location.hostname,d);if(c){var j=new Date;j.setTime(j.getTime()+24*c*36e5),f="; expires="+j.toUTCString()}e&&(g="; secure");var k=a+"="+encodeURIComponent(JSON.stringify(b))+f+"; SameSite=Lax; path=/"+i+g;return k.length>3686.4&&av.warn("cookieStore warning: large cookie, len="+k.length),h.cookie=k,k}catch(a){return}},V:function(a,b){if(null!=h&&h.cookie)try{bW.G(a,"",-1,b)}catch(a){return}}},bX=null,bY={H:function(){if(!K(bX))return bX;var a=!0;return H(b)&&(a=!1),a||av.error("localStorage unsupported; falling back to cookie store"),bX=a,a},B:function(a){av.error("localStorage error: "+a)},q:function(a){try{return null==b?void 0:b.localStorage.getItem(a)}catch(a){bY.B(a)}return null},W:function(a){try{return JSON.parse(bY.q(a))||{}}catch(a){}return null},G:function(a,c){try{null==b||b.localStorage.setItem(a,JSON.stringify(c))}catch(a){bY.B(a)}},V:function(a){try{null==b||b.localStorage.removeItem(a)}catch(a){bY.B(a)}}},bZ=["distinct_id",aW,aX,ba,a9],b$=r({},bY,{W:function(a){try{var b={};try{b=bW.W(a)||{}}catch(a){}var c=aC(b,JSON.parse(bY.q(a)||"{}"));return bY.G(a,c),c}catch(a){}return null},G:function(a,b,c,d,e,f){try{bY.G(a,b,void 0,void 0,f);var g={};bZ.forEach(a=>{b[a]&&(g[a]=b[a])}),Object.keys(g).length&&bW.G(a,g,c,d,e,f)}catch(a){bY.B(a)}},V:function(a,c){try{null==b||b.localStorage.removeItem(a),bW.V(a,c)}catch(a){bY.B(a)}}}),b_={},b0={H:function(){return!0},B:function(a){av.error("memoryStorage error: "+a)},q:function(a){return b_[a]||null},W:function(a){return b_[a]||null},G:function(a,b){b_[a]=b},V:function(a){delete b_[a]}},b1=null,b2={H:function(){return K(b1)&&(b1=!0,H(b)&&(b1=!1)),b1},B:function(a){av.error("sessionStorage error: ",a)},q:function(a){try{return null==b?void 0:b.sessionStorage.getItem(a)}catch(a){b2.B(a)}return null},W:function(a){try{return JSON.parse(b2.q(a))||null}catch(a){}return null},G:function(a,c){try{null==b||b.sessionStorage.setItem(a,JSON.stringify(c))}catch(a){b2.B(a)}},V:function(a){try{null==b||b.sessionStorage.removeItem(a)}catch(a){b2.B(a)}}},b3=((e3={})[e3.PENDING=-1]="PENDING",e3[e3.DENIED=0]="DENIED",e3[e3.GRANTED=1]="GRANTED",e3);class b4{constructor(a){this._instance=a}get C(){return this._instance.config}get consent(){return this.J()?b3.DENIED:this.K}isOptedOut(){return"always"===this.C.cookieless_mode||this.consent===b3.DENIED||this.consent===b3.PENDING&&(this.C.opt_out_capturing_by_default||"on_reject"===this.C.cookieless_mode)}isOptedIn(){return!this.isOptedOut()}isExplicitlyOptedOut(){return this.consent===b3.DENIED}optInOut(a){this.Y.G(this.X,+!!a,this.C.cookie_expiration,this.C.cross_subdomain_cookie,this.C.secure_cookie)}reset(){this.Y.V(this.X,this.C.cross_subdomain_cookie)}get X(){var{token:a,opt_out_capturing_cookie_prefix:b,consent_persistence_name:c}=this._instance.config;return c||(b?b+a:"__ph_opt_in_out_"+a)}get K(){var a=this.Y.q(this.X);return w(S,a)?b3.GRANTED:w(T,a)?b3.DENIED:b3.PENDING}get Y(){if(!this.Z){var a=this.C.opt_out_capturing_persistence_type;this.Z="localStorage"===a?bY:bW;var b="localStorage"===a?bW:bY;b.q(this.X)&&(this.Z.q(this.X)||this.optInOut(w(S,b.q(this.X))),b.V(this.X,this.C.cross_subdomain_cookie))}return this.Z}J(){return!!this.C.respect_dnt&&!!aI([null==g?void 0:g.doNotTrack,null==g?void 0:g.msDoNotTrack,n.doNotTrack],a=>w(S,a))}}var b5=aw("[Dead Clicks]"),b6=()=>!0,b7=a=>{var b,c=!(null==(b=a.instance.persistence)||!b.get_property(aT)),d=a.instance.config.capture_dead_clicks;return N(d)?d:c};class b8{get lazyLoadedDeadClicksAutocapture(){return this.tt}constructor(a,b,c){this.instance=a,this.isEnabled=b,this.onCapture=c,this.startIfEnabled()}onRemoteConfig(a){this.instance.persistence&&this.instance.persistence.register({[aT]:null==a?void 0:a.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.it(()=>{this.et()})}it(a){var b,c;null!=(b=n.__PosthogExtensions__)&&b.initDeadClicksAutocapture&&a(),null==(c=n.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this.instance,"dead-clicks-autocapture",b=>{b?b5.error("failed to load script",b):a()})}et(){var a;if(h){if(!this.tt&&null!=(a=n.__PosthogExtensions__)&&a.initDeadClicksAutocapture){var b=F(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};b.__onCapture=this.onCapture,this.tt=n.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,b),this.tt.start(h),b5.info("starting...")}}else b5.error("`document` not found. Cannot start.")}stop(){this.tt&&(this.tt.stop(),this.tt=void 0,b5.info("stopping..."))}}var b9=aw("[ExceptionAutocapture]");class ca{constructor(a){var c,d,e;this.rt=()=>{var a;b&&this.isEnabled&&null!=(a=n.__PosthogExtensions__)&&a.errorWrappingFunctions},this._instance=a,this.ut=!(null==(c=this._instance.persistence)||!c.props[aP]),this.C=this.ht(),this.dt=new V({refillRate:null!=(d=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)?d:1,bucketSize:null!=(e=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)?e:10,refillInterval:1e4,h:b9}),this.startIfEnabled()}ht(){var a=this._instance.config.capture_exceptions,b={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return F(a)?b=r({},b,a):(H(a)?this.ut:a)&&(b=r({},b,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),b}get isEnabled(){return this.C.capture_console_errors||this.C.capture_unhandled_errors||this.C.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(b9.info("enabled"),this.it(this.rt))}it(a){var b,c;null!=(b=n.__PosthogExtensions__)&&b.errorWrappingFunctions&&a(),null==(c=n.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"exception-autocapture",b=>{if(b)return b9.error("failed to load script",b);a()})}lt(){var a,b,c;null==(a=this.st)||a.call(this),this.st=void 0,null==(b=this.nt)||b.call(this),this.nt=void 0,null==(c=this.ot)||c.call(this),this.ot=void 0}onRemoteConfig(a){var b=a.autocaptureExceptions;this.ut=!!b,this.C=this.ht(),this._instance.persistence&&this._instance.persistence.register({[aP]:this.ut}),this.startIfEnabled()}captureException(a){var b,c,d=null!=(b=null==a||null==(c=a.$exception_list)||null==(c=c[0])?void 0:c.type)?b:"Exception";this.dt.consumeRateLimit(d)?b9.info("Skipping exception capture because of client rate limiting.",{exception:d}):this._instance.exceptions.sendExceptionEvent(a)}}class cb{constructor(a){var c;this._instance=a,this.vt=(null==b||null==(c=b.location)?void 0:c.pathname)||""}get isEnabled(){return"history_change"===this._instance.config.capture_pageview}startIfEnabled(){this.isEnabled&&(av.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.ct&&this.ct(),this.ct=void 0,av.info("History API monitoring stopped")}monitorHistoryChanges(){}ft(a){try{var c,d=null==b||null==(c=b.location)?void 0:c.pathname;if(!d)return;d!==this.vt&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:a}),this.vt=d}catch(b){av.error("Error capturing "+a+" pageview",b)}}gt(){if(!this.ct){var a=()=>{this.ft("popstate")};aJ(b,"popstate",a),this.ct=()=>{b&&b.removeEventListener("popstate",a)}}}}var cc=aw("[SegmentIntegration]"),cd="posthog-js";function ce(a,b){var{organization:c,projectId:d,prefix:e,severityAllowList:f=["error"],sendExceptionsToPostHog:g=!0}=void 0===b?{}:b;return b=>{if(!("*"===f||f.includes(b.level))||!a.__loaded)return b;b.tags||(b.tags={});var h,i,j,k,l,m=a.requestRouter.endpointFor("ui","/project/"+a.config.token+"/person/"+a.get_distinct_id());b.tags["PostHog Person URL"]=m,a.sessionRecordingStarted()&&(b.tags["PostHog Recording URL"]=a.get_session_replay_url({withTimestamp:!0}));var n=(null==(h=b.exception)?void 0:h.values)||[],o=n.map(a=>r({},a,{stacktrace:a.stacktrace?r({},a.stacktrace,{type:"raw",frames:(a.stacktrace.frames||[]).map(a=>r({},a,{platform:"web:javascript"}))}):void 0})),p={$exception_message:(null==(i=n[0])?void 0:i.value)||b.message,$exception_type:null==(j=n[0])?void 0:j.type,$exception_level:b.level,$exception_list:o,$sentry_event_id:b.event_id,$sentry_exception:b.exception,$sentry_exception_message:(null==(k=n[0])?void 0:k.value)||b.message,$sentry_exception_type:null==(l=n[0])?void 0:l.type,$sentry_tags:b.tags};return c&&d&&(p.$sentry_url=(e||"https://sentry.io/organizations/")+c+"/issues/?project="+d+"&query="+b.event_id),g&&a.exceptions.sendExceptionEvent(p),b}}class cf{constructor(a,b,c,d,e,f){this.name=cd,this.setupOnce=function(g){g(ce(a,{organization:b,projectId:c,prefix:d,severityAllowList:e,sendExceptionsToPostHog:null==f||f}))}}}null!=b&&b.location&&(bH(b.location.hash,"__posthog")||bH(location.hash,"state"));var cg=aw("[Toolbar]"),ch=((e4=ch||{})[e4.UNINITIALIZED=0]="UNINITIALIZED",e4[e4.LOADING=1]="LOADING",e4[e4.LOADED=2]="LOADED",e4);class ci{constructor(a){this.instance=a}_t(a){n.ph_toolbar_state=a}yt(){var a;return null!=(a=n.ph_toolbar_state)?a:ch.UNINITIALIZED}maybeLoadToolbar(a,b,c){return!1}bt(a){var b=n.ph_load_toolbar||n.ph_load_editor;!L(b)&&E(b)?b(a,this.instance):cg.warn("No toolbar load function found")}loadToolbar(a){return null!=h&&h.getElementById(bb),!1}wt(a){return this.loadToolbar(a)}maybeLoadEditor(a,b,c){return void 0===a&&(a=void 0),void 0===b&&(b=void 0),void 0===c&&(c=void 0),this.maybeLoadToolbar(a,b,c)}}var cj=aw("[TracingHeaders]");class ck{constructor(a){this.xt=void 0,this.$t=void 0,this.rt=()=>{var a,b;H(this.xt)&&(null==(a=n.__PosthogExtensions__)||null==(a=a.tracingHeadersPatchFns)||a._patchXHR(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager)),H(this.$t)&&(null==(b=n.__PosthogExtensions__)||null==(b=b.tracingHeadersPatchFns)||b._patchFetch(this._instance.config.__add_tracing_headers||[],this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=a}it(a){var b,c;null!=(b=n.__PosthogExtensions__)&&b.tracingHeadersPatchFns&&a(),null==(c=n.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"tracing-headers",b=>{if(b)return cj.error("failed to load script",b);a()})}startIfEnabledOrStop(){var a,b;this._instance.config.__add_tracing_headers?this.it(this.rt):(null==(a=this.xt)||a.call(this),null==(b=this.$t)||b.call(this),this.xt=void 0,this.$t=void 0)}}var cl="Mobile",cm="Android",cn="Tablet",co=cm+" "+cn,cp="iPad",cq="Apple",cr=cq+" Watch",cs="Safari",ct="BlackBerry",cu="Samsung",cv=cu+"Browser",cw=cu+" Internet",cx="Chrome",cy=cx+" OS",cz=cx+" iOS",cA="Internet Explorer",cB=cA+" "+cl,cC="Opera",cD=cC+" Mini",cE="Edge",cF="Microsoft "+cE,cG="Firefox",cH=cG+" iOS",cI="Nintendo",cJ="PlayStation",cK="Xbox",cL=cm+" "+cl,cM=cl+" "+cs,cN="Windows",cO=cN+" Phone",cP="Nokia",cQ="Ouya",cR="Generic",cS=cR+" "+cl.toLowerCase(),cT=cR+" "+cn.toLowerCase(),cU="Konqueror",cV="(\\d+(\\.\\d+)?)",cW=RegExp("Version/"+cV),cX=RegExp(cK,"i"),cY=RegExp(cJ+" \\w+","i"),cZ=RegExp(cI+" \\w+","i"),c$=RegExp(ct+"|PlayBook|BB10","i"),c_={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},c0=function(a,b){var c;return b=b||"",w(a," OPR/")&&w(a,"Mini")?cD:w(a," OPR/")?cC:c$.test(a)?ct:w(a,"IE"+cl)||w(a,"WPDesktop")?cB:w(a,cv)?cw:w(a,cE)||w(a,"Edg/")?cF:w(a,"FBIOS")?"Facebook "+cl:w(a,"UCWEB")||w(a,"UCBrowser")?"UC Browser":w(a,"CriOS")?cz:w(a,"CrMo")||w(a,cx)?cx:w(a,cm)&&w(a,cs)?cL:w(a,"FxiOS")?cH:w(a.toLowerCase(),cU.toLowerCase())?cU:(c=b)&&w(c,cq)||w(a,cs)&&!w(a,cx)&&!w(a,cm)?w(a,cl)?cM:cs:w(a,cG)?cG:w(a,"MSIE")||w(a,"Trident/")?cA:w(a,"Gecko")?cG:""},c1={[cB]:[RegExp("rv:"+cV)],[cF]:[RegExp(cE+"?\\/"+cV)],[cx]:[RegExp("("+cx+"|CrMo)\\/"+cV)],[cz]:[RegExp("CriOS\\/"+cV)],"UC Browser":[RegExp("(UCBrowser|UCWEB)\\/"+cV)],[cs]:[cW],[cM]:[cW],[cC]:[RegExp("(Opera|OPR)\\/"+cV)],[cG]:[RegExp(cG+"\\/"+cV)],[cH]:[RegExp("FxiOS\\/"+cV)],[cU]:[RegExp("Konqueror[:/]?"+cV,"i")],[ct]:[RegExp(ct+" "+cV),cW],[cL]:[RegExp("android\\s"+cV,"i")],[cw]:[RegExp(cv+"\\/"+cV)],[cA]:[RegExp("(rv:|MSIE )"+cV)],Mozilla:[RegExp("rv:"+cV)]},c2=function(a,b){var c=c1[c0(a,b)];if(H(c))return null;for(var d=0;d<c.length;d++){var e=c[d],f=a.match(e);if(f)return parseFloat(f[f.length-2])}return null},c3=[[RegExp(cK+"; "+cK+" (.*?)[);]","i"),a=>[cK,a&&a[1]||""]],[RegExp(cI,"i"),[cI,""]],[RegExp(cJ,"i"),[cJ,""]],[c$,[ct,""]],[RegExp(cN,"i"),(a,b)=>{if(/Phone/.test(b)||/WPDesktop/.test(b))return[cO,""];if(new RegExp(cl).test(b)&&!/IEMobile\b/.test(b))return[cN+" "+cl,""];var c=/Windows NT ([0-9.]+)/i.exec(b);if(c&&c[1]){var d=c_[c[1]]||"";return/arm/i.test(b)&&(d="RT"),[cN,d]}return[cN,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,a=>a&&a[3]?["iOS",[a[3],a[4],a[5]||"0"].join(".")]:["iOS",""]],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,a=>{var b="";return a&&a.length>=3&&(b=H(a[2])?a[3]:a[2]),["watchOS",b]}],[RegExp("("+cm+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+cm+")","i"),a=>a&&a[2]?[cm,[a[2],a[3],a[4]||"0"].join(".")]:[cm,""]],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,a=>{var b=["Mac OS X",""];if(a&&a[1]){var c=[a[1],a[2],a[3]||"0"];b[1]=c.join(".")}return b}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[cy,""]],[/Linux|debian/i,["Linux",""]]],c4=function(a){return cZ.test(a)?cI:cY.test(a)?cJ:cX.test(a)?cK:RegExp(cQ,"i").test(a)?cQ:RegExp("("+cO+"|WPDesktop)","i").test(a)?cO:/iPad/.test(a)?cp:/iPod/.test(a)?"iPod Touch":/iPhone/.test(a)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(a)?cr:c$.test(a)?ct:/(kobo)\s(ereader|touch)/i.test(a)?"Kobo":RegExp(cP,"i").test(a)?cP:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(a)||/(kf[a-z]+)( bui|\)).+silk\//i.test(a)?"Kindle Fire":/(Android|ZTE)/i.test(a)?!new RegExp(cl).test(a)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(a)?/pixel[\daxl ]{1,6}/i.test(a)&&!/pixel c/i.test(a)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(a)||/lmy47v/i.test(a)&&!/QTAQZ3/i.test(a)?cm:co:cm:RegExp("(pda|"+cl+")","i").test(a)?cS:RegExp(cn,"i").test(a)&&!RegExp(cn+" pc","i").test(a)?cT:""},c5="https?://(.*)",c6=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],c7=aD(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],c6),c8="<masked>",c9=["li_fat_id"];function da(a,b,c){if(!h)return{};var d,e=b?aD([],c6,c||[]):[],f=db(bG(h.URL,e,c8),a);return aC((d={},aB(c9,function(a){var b=bW.q(a);d[a]=b||null}),d),f)}function db(a,b){var c=c7.concat(b||[]),d={};return aB(c,function(b){var c=bF(a,b);d[b]=c||null}),d}function dc(a){var b=a?0===a.search(c5+"google.([^/?]*)")?"google":0===a.search(c5+"bing.com")?"bing":0===a.search(c5+"yahoo.com")?"yahoo":0===a.search(c5+"duckduckgo.com")?"duckduckgo":null:null,c={};if(!K(b)){c.$search_engine=b;var d=h?bF(h.referrer,"yahoo"!=b?"q":"p"):"";d.length&&(c.ph_keyword=d)}return c}function dd(){return navigator.language||navigator.userLanguage}function de(){return(null==h?void 0:h.referrer)||"$direct"}function df(a,b){var c=a?aD([],c6,b||[]):[],d=null==i?void 0:i.href.substring(0,1e3);return{r:de().substring(0,1e3),u:d?bG(d,c,c8):void 0}}function dg(a){var b,{r:c,u:d}=a,e={$referrer:c,$referring_domain:null==c?void 0:"$direct"==c?"$direct":null==(b=bD(c))?void 0:b.host};if(d){e.$current_url=d;var f=bD(d);e.$host=null==f?void 0:f.host,e.$pathname=null==f?void 0:f.pathname,aC(e,db(d))}return c&&aC(e,dc(c)),e}function dh(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(a){return}}var di=aw("[Web Vitals]");class dj{constructor(a){var b;this.St=!1,this.P=!1,this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Et=()=>{clearTimeout(this.kt),0!==this.N.metrics.length&&(this._instance.capture("$web_vitals",this.N.metrics.reduce((a,b)=>r({},a,{["$web_vitals_"+b.name+"_event"]:r({},b),["$web_vitals_"+b.name+"_value"]:b.value}),{})),this.N={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Pt=a=>{var b,c=null==(b=this._instance.sessionManager)?void 0:b.checkAndGetSessionAndWindowId(!0);if(H(c))di.error("Could not read session ID. Dropping metrics!");else{this.N=this.N||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var d=this.Tt();H(d)||(L(null==a?void 0:a.name)||L(null==a?void 0:a.value)?di.error("Invalid metric received",a):this.It&&a.value>=this.It?di.error("Ignoring metric with value >= "+this.It,a):(this.N.url!==d&&(this.Et(),this.kt=setTimeout(this.Et,this.flushToCaptureTimeoutMs)),H(this.N.url)&&(this.N.url=d),this.N.firstMetricTimestamp=H(this.N.firstMetricTimestamp)?Date.now():this.N.firstMetricTimestamp,a.attribution&&a.attribution.interactionTargetElement&&(a.attribution.interactionTargetElement=void 0),this.N.metrics.push(r({},a,{$current_url:d,$session_id:c.sessionId,$window_id:c.windowId,timestamp:Date.now()})),this.N.metrics.length===this.allowedMetrics.length&&this.Et()))}},this.rt=()=>{var a,b,c,d,e=n.__PosthogExtensions__;H(e)||H(e.postHogWebVitalsCallbacks)||({onLCP:a,onCLS:b,onFCP:c,onINP:d}=e.postHogWebVitalsCallbacks),a&&b&&c&&d?(this.allowedMetrics.indexOf("LCP")>-1&&a(this.Pt.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&b(this.Pt.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&c(this.Pt.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&d(this.Pt.bind(this)),this.P=!0):di.error("web vitals callbacks not loaded - not starting")},this._instance=a,this.St=!(null==(b=this._instance.persistence)||!b.props[aS]),this.startIfEnabled()}get allowedMetrics(){var a,b,c=F(this._instance.config.capture_performance)?null==(a=this._instance.config.capture_performance)?void 0:a.web_vitals_allowed_metrics:void 0;return H(c)?(null==(b=this._instance.persistence)?void 0:b.props[aU])||["CLS","FCP","INP","LCP"]:c}get flushToCaptureTimeoutMs(){return(F(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get It(){var a=F(this._instance.config.capture_performance)&&M(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:9e5;return 0<a&&a<=6e4?9e5:a}get isEnabled(){var a=null==i?void 0:i.protocol;if("http:"!==a&&"https:"!==a)return di.info("Web Vitals are disabled on non-http/https protocols"),!1;var b=F(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:N(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return N(b)?b:this.St}startIfEnabled(){this.isEnabled&&!this.P&&(di.info("enabled, starting..."),this.it(this.rt))}onRemoteConfig(a){var b=F(a.capturePerformance)&&!!a.capturePerformance.web_vitals,c=F(a.capturePerformance)?a.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[aS]:b}),this._instance.persistence.register({[aU]:c})),this.St=b,this.startIfEnabled()}it(a){var b,c;null!=(b=n.__PosthogExtensions__)&&b.postHogWebVitalsCallbacks&&a(),null==(c=n.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"web-vitals",b=>{b?di.error("failed to load script",b):a()})}Tt(){di.error("Could not determine current URL")}}var dk=aw("[Heatmaps]");function dl(a){return F(a)&&"clientX"in a&&"clientY"in a&&M(a.clientX)&&M(a.clientY)}class dm{constructor(a){var b;this.rageclicks=new bA,this.St=!1,this.P=!1,this.Rt=null,this.instance=a,this.St=!(null==(b=this.instance.persistence)||!b.props[aO])}get flushIntervalMilliseconds(){var a=5e3;return F(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(a=this.instance.config.capture_heatmaps.flush_interval_milliseconds),a}get isEnabled(){return H(this.instance.config.capture_heatmaps)?H(this.instance.config.enable_heatmaps)?this.St:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled)this.P||(dk.info("starting..."),this.Ct(),this.Ot());else{var a;clearInterval(null!=(a=this.Rt)?a:void 0),this.Ft(),this.getAndClearBuffer()}}onRemoteConfig(a){var b=!!a.heatmaps;this.instance.persistence&&this.instance.persistence.register({[aO]:b}),this.St=b,this.startIfEnabled()}getAndClearBuffer(){var a=this.N;return this.N=void 0,a}Mt(a){this.At(a.originalEvent,"deadclick")}Ot(){this.Rt&&clearInterval(this.Rt),this.Rt="visible"===(null==h?void 0:h.visibilityState)?setInterval(this.Dt.bind(this),this.flushIntervalMilliseconds):null}Ct(){b&&h&&(this.jt=this.Dt.bind(this),aJ(b,"beforeunload",this.jt),this.Lt=a=>this.At(a||(null==b?void 0:b.event)),aJ(h,"click",this.Lt,{capture:!0}),this.Nt=a=>this.Ut(a||(null==b?void 0:b.event)),aJ(h,"mousemove",this.Nt,{capture:!0}),this.zt=new b8(this.instance,b6,this.Mt.bind(this)),this.zt.startIfEnabled(),this.Ht=this.Ot.bind(this),aJ(h,"visibilitychange",this.Ht),this.P=!0)}Ft(){var a;b&&h&&(this.jt&&b.removeEventListener("beforeunload",this.jt),this.Lt&&h.removeEventListener("click",this.Lt,{capture:!0}),this.Nt&&h.removeEventListener("mousemove",this.Nt,{capture:!0}),this.Ht&&h.removeEventListener("visibilitychange",this.Ht),clearTimeout(this.Bt),null==(a=this.zt)||a.stop(),this.P=!1)}qt(a,c){var d=this.instance.scrollManager.scrollY(),e=this.instance.scrollManager.scrollX(),f=this.instance.scrollManager.scrollElement(),g=function(a,c,d){for(var e=a;e&&bf(e)&&!bg(e,"body")&&e!==d;){if(w(c,null==b?void 0:b.getComputedStyle(e).position))return!0;e=function(a){var b=a.parentNode;return!(!b||!bf(b))&&b}(e)}return!1}(bm(a),["fixed","sticky"],f);return{x:a.clientX+(g?0:e),y:a.clientY+(g?0:d),target_fixed:g,type:c}}At(a,b){var c;if(void 0===b&&(b="click"),!be(a.target)&&dl(a)){var d=this.qt(a,b);null!=(c=this.rageclicks)&&c.isRageClick(a.clientX,a.clientY,(new Date).getTime())&&this.Wt(r({},d,{type:"rageclick"})),this.Wt(d)}}Ut(a){!be(a.target)&&dl(a)&&(clearTimeout(this.Bt),this.Bt=setTimeout(()=>{this.Wt(this.qt(a,"mousemove"))},500))}Wt(a){}Dt(){this.N&&!G(this.N)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class dn{constructor(a){this._instance=a}doPageView(a,c){var d,e=this.Gt(a,c);return this.Vt={pathname:null!=(d=null==b?void 0:b.location.pathname)?d:"",pageViewId:c,timestamp:a},this._instance.scrollManager.resetContext(),e}doPageLeave(a){var b;return this.Gt(a,null==(b=this.Vt)?void 0:b.pageViewId)}doEvent(){var a;return{$pageview_id:null==(a=this.Vt)?void 0:a.pageViewId}}Gt(a,b){var c=this.Vt;if(!c)return{$pageview_id:b};var d={$pageview_id:b,$prev_pageview_id:c.pageViewId},e=this._instance.scrollManager.getContext();if(e&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:f,lastScrollY:g,maxScrollY:h,maxContentHeight:i,lastContentY:j,maxContentY:k}=e;if(!(H(f)||H(g)||H(h)||H(i)||H(j)||H(k))){f=Math.ceil(f),g=Math.ceil(g),h=Math.ceil(h),i=Math.ceil(i),j=Math.ceil(j),k=Math.ceil(k);var l=f<=1?1:U(g/f,0,1,av),m=f<=1?1:U(h/f,0,1,av),n=i<=1?1:U(j/i,0,1,av),o=i<=1?1:U(k/i,0,1,av);d=aC(d,{$prev_pageview_last_scroll:g,$prev_pageview_last_scroll_percentage:l,$prev_pageview_max_scroll:h,$prev_pageview_max_scroll_percentage:m,$prev_pageview_last_content:j,$prev_pageview_last_content_percentage:n,$prev_pageview_max_content:k,$prev_pageview_max_content_percentage:o})}}return c.pathname&&(d.$prev_pageview_pathname=c.pathname),c.timestamp&&(d.$prev_pageview_duration=(a.getTime()-c.timestamp.getTime())/1e3),d}}var dp=Uint8Array,dq=Uint16Array,dr=Uint32Array,ds=new dp([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),dt=new dp([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),du=new dp([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dv=function(a,b){for(var c=new dq(31),d=0;d<31;++d)c[d]=b+=1<<a[d-1];var e=new dr(c[30]);for(d=1;d<30;++d)for(var f=c[d];f<c[d+1];++f)e[f]=f-c[d]<<5|d;return[c,e]},dw=dv(ds,2),dx=dw[0],dy=dw[1];dx[28]=258,dy[258]=28;for(var dz=dv(dt,0)[1],dA=new dq(32768),dB=0;dB<32768;++dB){var dC=(43690&dB)>>>1|(21845&dB)<<1;dC=(61680&(dC=(52428&dC)>>>2|(13107&dC)<<2))>>>4|(3855&dC)<<4,dA[dB]=((65280&dC)>>>8|(255&dC)<<8)>>>1}var dD=function(a,b,c){for(var d=a.length,e=0,f=new dq(b);e<d;++e)++f[a[e]-1];var g,h=new dq(b);for(e=0;e<b;++e)h[e]=h[e-1]+f[e-1]<<1;if(c){g=new dq(1<<b);var i=15-b;for(e=0;e<d;++e)if(a[e])for(var j=e<<4|a[e],k=b-a[e],l=h[a[e]-1]++<<k,m=l|(1<<k)-1;l<=m;++l)g[dA[l]>>>i]=j}else for(g=new dq(d),e=0;e<d;++e)g[e]=dA[h[a[e]-1]++]>>>15-a[e];return g},dE=new dp(288);for(dB=0;dB<144;++dB)dE[dB]=8;for(dB=144;dB<256;++dB)dE[dB]=9;for(dB=256;dB<280;++dB)dE[dB]=7;for(dB=280;dB<288;++dB)dE[dB]=8;var dF=new dp(32);for(dB=0;dB<32;++dB)dF[dB]=5;var dG=dD(dE,9,0),dH=dD(dF,5,0),dI=function(a){return(a/8|0)+(7&a&&1)},dJ=function(a,b,c){(null==c||c>a.length)&&(c=a.length);var d=new(a instanceof dq?dq:a instanceof dr?dr:dp)(c-b);return d.set(a.subarray(b,c)),d},dK=function(a,b,c){c<<=7&b;var d=b/8|0;a[d]|=c,a[d+1]|=c>>>8},dL=function(a,b,c){c<<=7&b;var d=b/8|0;a[d]|=c,a[d+1]|=c>>>8,a[d+2]|=c>>>16},dM=function(a,b){for(var c=[],d=0;d<a.length;++d)a[d]&&c.push({s:d,f:a[d]});var e=c.length,f=c.slice();if(!e)return[new dp(0),0];if(1==e){var g=new dp(c[0].s+1);return g[c[0].s]=1,[g,1]}c.sort(function(a,b){return a.f-b.f}),c.push({s:-1,f:25001});var h=c[0],i=c[1],j=0,k=1,l=2;for(c[0]={s:-1,f:h.f+i.f,l:h,r:i};k!=e-1;)h=c[c[j].f<c[l].f?j++:l++],i=c[j!=k&&c[j].f<c[l].f?j++:l++],c[k++]={s:-1,f:h.f+i.f,l:h,r:i};var m=f[0].s;for(d=1;d<e;++d)f[d].s>m&&(m=f[d].s);var n=new dq(m+1),o=dN(c[k-1],n,0);if(o>b){d=0;var p=0,q=o-b,r=1<<q;for(f.sort(function(a,b){return n[b.s]-n[a.s]||a.f-b.f});d<e;++d){var s=f[d].s;if(!(n[s]>b))break;p+=r-(1<<o-n[s]),n[s]=b}for(p>>>=q;p>0;){var t=f[d].s;n[t]<b?p-=1<<b-n[t]++-1:++d}for(;d>=0&&p;--d){var u=f[d].s;n[u]==b&&(--n[u],++p)}o=b}return[new dp(n),o]},dN=function(a,b,c){return -1==a.s?Math.max(dN(a.l,b,c+1),dN(a.r,b,c+1)):b[a.s]=c},dO=function(a){for(var b=a.length;b&&!a[--b];);for(var c=new dq(++b),d=0,e=a[0],f=1,g=function(a){c[d++]=a},h=1;h<=b;++h)if(a[h]==e&&h!=b)++f;else{if(!e&&f>2){for(;f>138;f-=138)g(32754);f>2&&(g(f>10?f-11<<5|28690:f-3<<5|12305),f=0)}else if(f>3){for(g(e),--f;f>6;f-=6)g(8304);f>2&&(g(f-3<<5|8208),f=0)}for(;f--;)g(e);f=1,e=a[h]}return[c.subarray(0,d),b]},dP=function(a,b){for(var c=0,d=0;d<b.length;++d)c+=a[d]*b[d];return c},dQ=function(a,b,c){var d=c.length,e=dI(b+2);a[e]=255&d,a[e+1]=d>>>8,a[e+2]=255^a[e],a[e+3]=255^a[e+1];for(var f=0;f<d;++f)a[e+f+4]=c[f];return 8*(e+4+d)},dR=function(a,b,c,d,e,f,g,h,i,j,k){dK(b,k++,c),++e[256];for(var l=dM(e,15),m=l[0],n=l[1],o=dM(f,15),p=o[0],q=o[1],r=dO(m),s=r[0],t=r[1],u=dO(p),v=u[0],w=u[1],x=new dq(19),y=0;y<s.length;++y)x[31&s[y]]++;for(y=0;y<v.length;++y)x[31&v[y]]++;for(var z=dM(x,7),A=z[0],B=z[1],C=19;C>4&&!A[du[C-1]];--C);var D,E,F,G,H=j+5<<3,I=dP(e,dE)+dP(f,dF)+g,J=dP(e,m)+dP(f,p)+g+14+3*C+dP(x,A)+(2*x[16]+3*x[17]+7*x[18]);if(H<=I&&H<=J)return dQ(b,k,a.subarray(i,i+j));if(dK(b,k,1+(J<I)),k+=2,J<I){D=dD(m,n,0),E=m,F=dD(p,q,0),G=p;var K=dD(A,B,0);for(dK(b,k,t-257),dK(b,k+5,w-1),dK(b,k+10,C-4),k+=14,y=0;y<C;++y)dK(b,k+3*y,A[du[y]]);k+=3*C;for(var L=[s,v],M=0;M<2;++M){var N=L[M];for(y=0;y<N.length;++y){var O=31&N[y];dK(b,k,K[O]),k+=A[O],O>15&&(dK(b,k,N[y]>>>5&127),k+=N[y]>>>12)}}}else D=dG,E=dE,F=dH,G=dF;for(y=0;y<h;++y)if(d[y]>255){dL(b,k,D[(O=d[y]>>>18&31)+257]),k+=E[O+257],O>7&&(dK(b,k,d[y]>>>23&31),k+=ds[O]);var P=31&d[y];dL(b,k,F[P]),k+=G[P],P>3&&(dL(b,k,d[y]>>>5&8191),k+=dt[P])}else dL(b,k,D[d[y]]),k+=E[d[y]];return dL(b,k,D[256]),k+E[256]},dS=new dr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dT=function(){for(var a=new dr(256),b=0;b<256;++b){for(var c=b,d=9;--d;)c=(1&c&&0xedb88320)^c>>>1;a[b]=c}return a}(),dU=function(a,b,c){for(;c;++b)a[b]=c,c>>>=8},dV=function(a){var b,c,d,e,f="";for(b=c=0,d=(a=(a+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,e=0;e<d;e++){var g=a.charCodeAt(e),h=null;g<128?c++:h=g>127&&g<2048?String.fromCharCode(g>>6|192,63&g|128):String.fromCharCode(g>>12|224,g>>6&63|128,63&g|128),K(h)||(c>b&&(f+=a.substring(b,c)),f+=h,b=c=e+1)}return c>b&&(f+=a.substring(b,a.length)),f},dW=!!k||!!j,dX="text/plain",dY=function(a,b,c){void 0===c&&(c=!0);var d,[e,f]=a.split("?"),g=r({},b),h=null!=(d=null==f?void 0:f.split("&").map(a=>{var b,[d,e]=a.split("="),f=c&&null!=(b=g[d])?b:e;return delete g[d],d+"="+f}))?d:[],i=bE(g);return i&&h.push(i),e+"?"+h.join("&")},dZ=(a,b)=>JSON.stringify(a,(a,b)=>"bigint"==typeof b?b.toString():b,b),d$=a=>{var{data:b,compression:c}=a;if(b){if(c===bC.GZipJS){var d,e,f,g,h,i,j,k,l=new Blob([(d=function(a,b){var c=a.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(a);for(var d=new dp(a.length+(a.length>>>1)),e=0,f=function(a){d[e++]=a},g=0;g<c;++g){if(e+5>d.length){var h=new dp(e+8+(c-g<<1));h.set(d),d=h}var i=a.charCodeAt(g);i<128?f(i):(i<2048?f(192|i>>>6):(i>55295&&i<57344?(f(240|(i=65536+(1047552&i)|1023&a.charCodeAt(++g))>>>18),f(128|i>>>12&63)):f(224|i>>>12),f(128|i>>>6&63)),f(128|63&i))}return dJ(d,0,e)}(dZ(b)),e={mtime:0},f=0xffffffff,g={p:function(a){for(var b=f,c=0;c<a.length;++c)b=dT[255&b^a[c]]^b>>>8;f=b},d:function(){return 0xffffffff^f}},h=d.length,g.p(d),k=(i=10+(e.filename&&e.filename.length+1||0),j=function(a,b,c,d,e,f){var g=a.length,h=new dp(d+g+5*(1+Math.floor(g/7e3))+8),i=h.subarray(d,h.length-8),j=0;if(!b||g<8)for(var k=0;k<=g;k+=65535){var l=k+65535;l<g?j=dQ(i,j,a.subarray(k,l)):(i[k]=f,j=dQ(i,j,a.subarray(k,g)))}else{for(var m=dS[b-1],n=m>>>13,o=8191&m,p=(1<<c)-1,q=new dq(32768),r=new dq(p+1),s=Math.ceil(c/3),t=2*s,u=function(b){return(a[b]^a[b+1]<<s^a[b+2]<<t)&p},v=new dr(25e3),w=new dq(288),x=new dq(32),y=0,z=0,A=(k=0,0),B=0,C=0;k<g;++k){var D=u(k),E=32767&k,F=r[D];if(q[E]=F,r[D]=E,B<=k){var G=g-k;if((y>7e3||A>24576)&&G>423){j=dR(a,i,0,v,w,x,z,A,C,k-C,j),A=y=z=0,C=k;for(var H=0;H<286;++H)w[H]=0;for(H=0;H<30;++H)x[H]=0}var I=2,J=0,K=o,L=E-F&32767;if(G>2&&D==u(k-L))for(var M=Math.min(n,G)-1,N=Math.min(32767,k),O=Math.min(258,G);L<=N&&--K&&E!=F;){if(a[k+I]==a[k+I-L]){for(var P=0;P<O&&a[k+P]==a[k+P-L];++P);if(P>I){if(I=P,J=L,P>M)break;var Q=Math.min(L,P-2),R=0;for(H=0;H<Q;++H){var S=k-L+H+32768&32767,T=S-q[S]+32768&32767;T>R&&(R=T,F=S)}}}L+=(E=F)-(F=q[E])+32768&32767}if(J){v[A++]=0x10000000|dy[I]<<18|dz[J];var U=31&dy[I],V=31&dz[J];z+=ds[U]+dt[V],++w[257+U],++x[V],B=k+I,++y}else v[A++]=a[k],++w[a[k]]}}j=dR(a,i,f,v,w,x,z,A,C,k-C,j)}return dJ(h,0,d+dI(j)+8)}(d,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(d.length)))):12+e.mem,i,8,!0)).length,function(a,b){var c=b.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=b.level<2?4:2*(9==b.level),a[9]=3,0!=b.mtime&&dU(a,4,Math.floor(new Date(b.mtime||Date.now())/1e3)),c){a[3]=8;for(var d=0;d<=c.length;++d)a[d+10]=c.charCodeAt(d)}}(j,e),dU(j,k-8,g.d()),dU(j,k-4,h),j)],{type:dX});return{contentType:dX,body:l,estimatedSize:l.size}}if(c===bC.Base64){let a;var m="data="+encodeURIComponent("string"==typeof(a=function(a){var b,c,d,e,f,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=0,i=0,j="",k=[];if(!a)return a;a=dV(a);do b=(f=a.charCodeAt(h++)<<16|a.charCodeAt(h++)<<8|a.charCodeAt(h++))>>18&63,c=f>>12&63,d=f>>6&63,e=63&f,k[i++]=g.charAt(b)+g.charAt(c)+g.charAt(d)+g.charAt(e);while(h<a.length)switch(j=k.join(""),a.length%3){case 1:j=j.slice(0,-2)+"==";break;case 2:j=j.slice(0,-1)+"="}return j}(dZ(b)))?a:dZ(a));return{contentType:"application/x-www-form-urlencoded",body:m,estimatedSize:new Blob([m]).size}}var n=dZ(b);return{contentType:"application/json",body:n,estimatedSize:new Blob([n]).size}}},d_=[];j&&d_.push({transport:"fetch",method:a=>{var b,c,{contentType:d,body:e,estimatedSize:f}=null!=(b=d$(a))?b:{},g=new Headers;aB(a.headers,function(a,b){g.append(b,a)}),d&&g.append("Content-Type",d);var h=a.url,i=null;if(l){var k=new l;i={signal:k.signal,timeout:setTimeout(()=>k.abort(),a.timeout)}}j(h,r({method:(null==a?void 0:a.method)||"GET",headers:g,keepalive:"POST"===a.method&&52428.8>(f||0),body:e,signal:null==(c=i)?void 0:c.signal},a.fetchOptions)).then(b=>b.text().then(c=>{var d={statusCode:b.status,text:c};if(200===b.status)try{d.json=JSON.parse(c)}catch(a){av.error(a)}null==a.callback||a.callback(d)})).catch(b=>{av.error(b),null==a.callback||a.callback({statusCode:0,text:b})}).finally(()=>i?clearTimeout(i.timeout):null)}}),k&&d_.push({transport:"XHR",method:a=>{var b,c=new k;c.open(a.method||"GET",a.url,!0);var{contentType:d,body:e}=null!=(b=d$(a))?b:{};aB(a.headers,function(a,b){c.setRequestHeader(b,a)}),d&&c.setRequestHeader("Content-Type",d),a.timeout&&(c.timeout=a.timeout),a.disableXHRCredentials||(c.withCredentials=!0),c.onreadystatechange=()=>{if(4===c.readyState){var b={statusCode:c.status,text:c.responseText};if(200===c.status)try{b.json=JSON.parse(c.responseText)}catch(a){}null==a.callback||a.callback(b)}},c.send(e)}}),null!=g&&g.sendBeacon&&d_.push({transport:"sendBeacon",method:a=>{var b=dY(a.url,{beacon:"1"});try{var c,{contentType:d,body:e}=null!=(c=d$(a))?c:{},f="string"==typeof e?new Blob([e],{type:d}):e;g.sendBeacon(b,f)}catch(a){}}});var d0=function(a,b){if(!function(a){try{new RegExp(a)}catch(a){return!1}return!0}(b))return!1;try{return new RegExp(b).test(a)}catch(a){return!1}};function d1(a,b,c){return dZ({distinct_id:a,userPropertiesToSet:b,userPropertiesToSetOnce:c})}var d2={exact:(a,b)=>b.some(b=>a.some(a=>b===a)),is_not:(a,b)=>b.every(b=>a.every(a=>b!==a)),regex:(a,b)=>b.some(b=>a.some(a=>d0(b,a))),not_regex:(a,b)=>b.every(b=>a.every(a=>!d0(b,a))),icontains:(a,b)=>b.map(d3).some(b=>a.map(d3).some(a=>b.includes(a))),not_icontains:(a,b)=>b.map(d3).every(b=>a.map(d3).every(a=>!b.includes(a)))},d3=a=>a.toLowerCase(),d4=aw("[Error tracking]");class d5{constructor(a){var b,c;this.Jt=[],this.Kt=new ai([new aj,new at,new al,new ak,new ar,new aq,new an,new as],[ad,ag]),this._instance=a,this.Jt=null!=(b=null==(c=this._instance.persistence)?void 0:c.get_property(aQ))?b:[]}onRemoteConfig(a){var b,c,d,e=null!=(b=null==(c=a.errorTracking)?void 0:c.suppressionRules)?b:[],f=null==(d=a.errorTracking)?void 0:d.captureExtensionExceptions;this.Jt=e,this._instance.persistence&&this._instance.persistence.register({[aQ]:this.Jt,[aR]:f})}get Yt(){var a,b=!!this._instance.get_property(aR),c=this._instance.config.error_tracking.captureExtensionExceptions;return null!=(a=null!=c?c:b)&&a}buildProperties(a,b){return this.Kt.buildFromUnknown(a,{syntheticException:null==b?void 0:b.syntheticException,mechanism:{handled:null==b?void 0:b.handled}})}sendExceptionEvent(a){var b=a.$exception_list;if(this.Xt(b)){if(this.Qt(b))return void d4.info("Skipping exception capture because a suppression rule matched");if(!this.Yt&&this.Zt(b))return void d4.info("Skipping exception capture because it was thrown by an extension");if(!this._instance.config.error_tracking.__capturePostHogExceptions&&this.ti(b))return void d4.info("Skipping exception capture because it was thrown by the PostHog SDK")}return this._instance.capture("$exception",a,{_noTruncate:!0,_batchKey:"exceptionEvent"})}Qt(a){if(0===a.length)return!1;var b=a.reduce((a,b)=>{var{type:c,value:d}=b;return I(c)&&c.length>0&&a.$exception_types.push(c),I(d)&&d.length>0&&a.$exception_values.push(d),a},{$exception_types:[],$exception_values:[]});return this.Jt.some(a=>{var c=a.values.map(a=>{var c,d=d2[a.operator],e=D(a.value)?a.value:[a.value],f=null!=(c=b[a.key])?c:[];return e.length>0&&d(e,f)});return"OR"===a.type?c.some(Boolean):c.every(Boolean)})}Zt(a){return a.flatMap(a=>{var b,c;return null!=(b=null==(c=a.stacktrace)?void 0:c.frames)?b:[]}).some(a=>a.filename&&a.filename.startsWith("chrome-extension://"))}ti(a){if(a.length>0){var b,c,d,e,f=null!=(b=null==(c=a[0].stacktrace)?void 0:c.frames)?b:[],g=f[f.length-1];return null!=(d=null==g||null==(e=g.filename)?void 0:e.includes("posthog.com/static"))&&d}return!1}Xt(a){return!L(a)&&D(a)}}var d6=aw("[FeatureFlags]"),d7="$active_feature_flags",d8="$override_feature_flags",d9="$feature_flag_payloads",ea="$override_feature_flag_payloads",eb="$feature_flag_request_id",ec=a=>{var b={};for(var[c,d]of aE(a||{}))d&&(b[c]=d);return b},ed=((e5={}).FeatureFlags="feature_flags",e5.Recordings="recordings",e5);class ee{constructor(a){this.ii=!1,this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this._instance=a,this.featureFlagEventHandlers=[]}li(){var a=this._instance.config.evaluation_environments;return null!=a&&a.length?a.filter(a=>{var b=a&&"string"==typeof a&&a.trim().length>0;return b||d6.error("Invalid evaluation environment found:",a,"Expected non-empty string"),b}):[]}ui(){return this.li().length>0}flags(){if(this._instance.config.__preview_remote_config)this.oi=!0;else{var a=!this.hi&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.di({disableFlags:a})}}get hasLoadedFlags(){return this.ei}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var a=this._instance.get_property(a$),b=this._instance.get_property(d8),c=this._instance.get_property(ea);if(!c&&!b)return a||{};var d=aC({},a||{});for(var e of[...new Set([...Object.keys(c||{}),...Object.keys(b||{})])]){var f,g,h=d[e],i=null==b?void 0:b[e],j=H(i)?null!=(f=null==h?void 0:h.enabled)&&f:!!i,k=H(i)?h.variant:"string"==typeof i?i:void 0,l=null==c?void 0:c[e],m=r({},h,{enabled:j,variant:j?null!=k?k:null==h?void 0:h.variant:void 0});j!==(null==h?void 0:h.enabled)&&(m.original_enabled=null==h?void 0:h.enabled),k!==(null==h?void 0:h.variant)&&(m.original_variant=null==h?void 0:h.variant),l&&(m.metadata=r({},null==h?void 0:h.metadata,{payload:l,original_payload:null==h||null==(g=h.metadata)?void 0:g.payload})),d[e]=m}return this.ii||(d6.warn(" Overriding feature flag details!",{flagDetails:a,overriddenPayloads:c,finalDetails:d}),this.ii=!0),d}getFlagVariants(){var a=this._instance.get_property(aY),b=this._instance.get_property(d8);if(!b)return a||{};for(var c=aC({},a),d=Object.keys(b),e=0;e<d.length;e++)c[d[e]]=b[d[e]];return this.ii||(d6.warn(" Overriding feature flags!",{enabledFlags:a,overriddenFlags:b,finalFlags:c}),this.ii=!0),c}getFlagPayloads(){var a=this._instance.get_property(d9),b=this._instance.get_property(ea);if(!b)return a||{};for(var c=aC({},a||{}),d=Object.keys(b),e=0;e<d.length;e++)c[d[e]]=b[d[e]];return this.ii||(d6.warn(" Overriding feature flag payloads!",{flagPayloads:a,overriddenPayloads:b,finalPayloads:c}),this.ii=!0),c}reloadFeatureFlags(){this.si||this._instance.config.advanced_disable_feature_flags||this.hi||(this.hi=setTimeout(()=>{this.di()},5))}vi(){clearTimeout(this.hi),this.hi=void 0}ensureFlagsLoaded(){this.ei||this.ri||this.hi||this.reloadFeatureFlags()}setAnonymousDistinctId(a){this.$anon_distinct_id=a}setReloadingPaused(a){this.si=a}di(a){var b;if(this.vi(),!this._instance.M())if(this.ri)this.ni=!0;else{var c={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:r({},(null==(b=this._instance.persistence)?void 0:b.get_initial_props())||{},this._instance.get_property(a_)||{}),group_properties:this._instance.get_property(a0)};(null!=a&&a.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(c.disable_flags=!0),this.ui()&&(c.evaluation_environments=this.li());var d=this._instance.config.__preview_remote_config,e=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",f=this._instance.requestRouter.endpointFor("flags",(d?"/flags/?v=2":"/flags/?v=2&config=true")+e);d&&(c.timezone=dh()),this.ri=!0,this._instance.ci({method:"POST",url:f,data:c,compression:this._instance.config.disable_compression?void 0:bC.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:a=>{var b,d,e,f=!0;200===a.statusCode&&(this.ni||(this.$anon_distinct_id=void 0),f=!1),this.ri=!1,this.oi||(this.oi=!0,this._instance.fi(null!=(e=a.json)?e:{})),(!c.disable_flags||this.ni)&&((this.ai=!f,a.json&&null!=(d=a.json.quotaLimited)&&d.includes(ed.FeatureFlags))?d6.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more."):(c.disable_flags||this.receivedFeatureFlags(null!=(b=a.json)?b:{},f),this.ni&&(this.ni=!1,this.di())))}})}}getFeatureFlag(a,b){if(void 0===b&&(b={}),this.ei||this.getFlags()&&this.getFlags().length>0){var c=this.getFlagVariants()[a],d=""+c,e=this._instance.get_property(eb)||void 0,f=this._instance.get_property(a3)||{};if((b.send_event||!("send_event"in b))&&(!(a in f)||!f[a].includes(d))){D(f[a])?f[a].push(d):f[a]=[d],null==(i=this._instance.persistence)||i.register({[a3]:f});var g=this.getFeatureFlagDetails(a),h={$feature_flag:a,$feature_flag_response:c,$feature_flag_payload:this.getFeatureFlagPayload(a)||null,$feature_flag_request_id:e,$feature_flag_bootstrapped_response:(null==(j=this._instance.config.bootstrap)||null==(j=j.featureFlags)?void 0:j[a])||null,$feature_flag_bootstrapped_payload:(null==(k=this._instance.config.bootstrap)||null==(k=k.featureFlagPayloads)?void 0:k[a])||null,$used_bootstrap_value:!this.ai};H(null==g||null==(l=g.metadata)?void 0:l.version)||(h.$feature_flag_version=g.metadata.version);var i,j,k,l,m,n,o,p,q,r,s=null!=(m=null==g||null==(n=g.reason)?void 0:n.description)?m:null==g||null==(o=g.reason)?void 0:o.code;s&&(h.$feature_flag_reason=s),null!=g&&null!=(p=g.metadata)&&p.id&&(h.$feature_flag_id=g.metadata.id),H(null==g?void 0:g.original_variant)&&H(null==g?void 0:g.original_enabled)||(h.$feature_flag_original_response=H(g.original_variant)?g.original_enabled:g.original_variant),null!=g&&null!=(q=g.metadata)&&q.original_payload&&(h.$feature_flag_original_payload=null==g||null==(r=g.metadata)?void 0:r.original_payload),this._instance.capture("$feature_flag_called",h)}return c}d6.warn('getFeatureFlag for key "'+a+"\" failed. Feature flags didn't load in time.")}getFeatureFlagDetails(a){return this.getFlagsWithDetails()[a]}getFeatureFlagPayload(a){return this.getFlagPayloads()[a]}getRemoteConfigPayload(a,b){var c=this._instance.config.token,d={distinct_id:this._instance.get_distinct_id(),token:c};this.ui()&&(d.evaluation_environments=this.li()),this._instance.ci({method:"POST",url:this._instance.requestRouter.endpointFor("flags","/flags/?v=2&config=true"),data:d,compression:this._instance.config.disable_compression?void 0:bC.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:c=>{var d,e=null==(d=c.json)?void 0:d.featureFlagPayloads;b((null==e?void 0:e[a])||void 0)}})}isFeatureEnabled(a,b){if(void 0===b&&(b={}),this.ei||this.getFlags()&&this.getFlags().length>0){var c=this.getFeatureFlag(a,b);return H(c)?void 0:!!c}d6.warn('isFeatureEnabled for key "'+a+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(a){this.featureFlagEventHandlers.push(a)}removeFeatureFlagsHandler(a){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(b=>b!==a)}receivedFeatureFlags(a,b){if(this._instance.persistence){this.ei=!0;var c=this.getFlagVariants(),d=this.getFlagPayloads(),e=this.getFlagsWithDetails();!function(a,b,c,d,e){void 0===c&&(c={}),void 0===d&&(d={}),void 0===e&&(e={});var f,g=((f=a.flags)?(a.featureFlags=Object.fromEntries(Object.keys(f).map(a=>{var b;return[a,null!=(b=f[a].variant)?b:f[a].enabled]})),a.featureFlagPayloads=Object.fromEntries(Object.keys(f).filter(a=>f[a].enabled).filter(a=>{var b;return null==(b=f[a].metadata)?void 0:b.payload}).map(a=>{var b;return[a,null==(b=f[a].metadata)?void 0:b.payload]}))):d6.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),a),h=g.flags,i=g.featureFlags,j=g.featureFlagPayloads;if(i){var k=a.requestId;if(D(i)){d6.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var l={};if(i)for(var m=0;m<i.length;m++)l[i[m]]=!0;b&&b.register({[d7]:i,[aY]:l})}else{var n=i,o=j,p=h;a.errorsWhileComputingFlags&&(n=r({},c,n),o=r({},d,o),p=r({},e,p)),b&&b.register(r({[d7]:Object.keys(ec(n)),[aY]:n||{},[d9]:o||{},[a$]:p||{}},k?{[eb]:k}:{}))}}}(a,this._instance.persistence,c,d,e),this.pi(b)}}override(a,b){void 0===b&&(b=!1),d6.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:a,suppressWarning:b})}overrideFeatureFlags(a){if(!this._instance.__loaded||!this._instance.persistence)return d6.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(!1===a)return this._instance.persistence.unregister(d8),this._instance.persistence.unregister(ea),void this.pi();if(a&&"object"==typeof a&&("flags"in a||"payloads"in a)){var b;if(this.ii=!!(null!=(b=a.suppressWarning)&&b),"flags"in a){if(!1===a.flags)this._instance.persistence.unregister(d8);else if(a.flags)if(D(a.flags)){for(var c={},d=0;d<a.flags.length;d++)c[a.flags[d]]=!0;this._instance.persistence.register({[d8]:c})}else this._instance.persistence.register({[d8]:a.flags})}return"payloads"in a&&(!1===a.payloads?this._instance.persistence.unregister(ea):a.payloads&&this._instance.persistence.register({[ea]:a.payloads})),void this.pi()}this.pi()}onFeatureFlags(a){if(this.addFeatureFlagsHandler(a),this.ei){var{flags:b,flagVariants:c}=this.gi();a(b,c)}return()=>this.removeFeatureFlagsHandler(a)}updateEarlyAccessFeatureEnrollment(a,b,c){var d,e=(this._instance.get_property(aZ)||[]).find(b=>b.flagKey===a),f={["$feature_enrollment/"+a]:b},g={$feature_flag:a,$feature_enrollment:b,$set:f};e&&(g.$early_access_feature_name=e.name),c&&(g.$feature_enrollment_stage=c),this._instance.capture("$feature_enrollment_update",g),this.setPersonPropertiesForFlags(f,!1);var h=r({},this.getFlagVariants(),{[a]:b});null==(d=this._instance.persistence)||d.register({[d7]:Object.keys(ec(h)),[aY]:h}),this.pi()}getEarlyAccessFeatures(a,b,c){void 0===b&&(b=!1);var d=this._instance.get_property(aZ),e=c?"&"+c.map(a=>"stage="+a).join("&"):"";if(d&&!b)return a(d);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+e),method:"GET",callback:b=>{var c,d;if(b.json){var e=b.json.earlyAccessFeatures;return null==(c=this._instance.persistence)||c.unregister(aZ),null==(d=this._instance.persistence)||d.register({[aZ]:e}),a(e)}}})}gi(){var a=this.getFlags(),b=this.getFlagVariants();return{flags:a.filter(a=>b[a]),flagVariants:Object.keys(b).filter(a=>b[a]).reduce((a,c)=>(a[c]=b[c],a),{})}}pi(a){var{flags:b,flagVariants:c}=this.gi();this.featureFlagEventHandlers.forEach(d=>d(b,c,{errorsLoading:a}))}setPersonPropertiesForFlags(a,b){void 0===b&&(b=!0);var c=this._instance.get_property(a_)||{};this._instance.register({[a_]:r({},c,a)}),b&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(a_)}setGroupPropertiesForFlags(a,b){void 0===b&&(b=!0);var c=this._instance.get_property(a0)||{};0!==Object.keys(c).length&&Object.keys(c).forEach(b=>{c[b]=r({},c[b],a[b]),delete a[b]}),this._instance.register({[a0]:r({},c,a)}),b&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(a){if(a){var b=this._instance.get_property(a0)||{};this._instance.register({[a0]:r({},b,{[a]:{}})})}else this._instance.unregister(a0)}reset(){this.ei=!1,this.ri=!1,this.si=!1,this.ni=!1,this.oi=!1,this.ai=!1,this.$anon_distinct_id=void 0,this.vi(),this.ii=!1}}var ef=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class eg{constructor(a,b){this.C=a,this.props={},this.mi=!1,this.yi=(a=>{var b="";return a.token&&(b=a.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),a.persistence_name?"ph_"+a.persistence_name:"ph_"+b+"_posthog"})(a),this.Y=this.bi(a),this.load(),a.debug&&av.info("Persistence loaded",a.persistence,r({},this.props)),this.update_config(a,a,b),this.save()}isDisabled(){return!!this.wi}bi(a){-1===ef.indexOf(a.persistence.toLowerCase())&&(av.critical("Unknown persistence type "+a.persistence+"; falling back to localStorage+cookie"),a.persistence="localStorage+cookie");var b=a.persistence.toLowerCase();return"localstorage"===b&&bY.H()?bY:"localstorage+cookie"===b&&b$.H()?b$:"sessionstorage"===b&&b2.H()?b2:"memory"===b?b0:"cookie"===b?bW:b$.H()?b$:bW}properties(){var a={};return aB(this.props,function(b,c){if(c===aY&&F(b))for(var d,e=Object.keys(b),g=0;g<e.length;g++)a["$feature/"+e[g]]=b[e[g]];else d=!1,(K(bd)?d:f&&bd.indexOf===f?-1!=bd.indexOf(c):(aB(bd,function(a){if(d||(d=a===c))return az}),d))||(a[c]=b)}),a}load(){if(!this.wi){var a=this.Y.W(this.yi);a&&(this.props=aC({},a))}}save(){this.wi||this.Y.G(this.yi,this.props,this.xi,this.$i,this.Si,this.C.debug)}remove(){this.Y.V(this.yi,!1),this.Y.V(this.yi,!0)}clear(){this.remove(),this.props={}}register_once(a,b,c){if(F(a)){H(b)&&(b="None"),this.xi=H(c)?this.Ei:c;var d=!1;if(aB(a,(a,c)=>{this.props.hasOwnProperty(c)&&this.props[c]!==b||(this.props[c]=a,d=!0)}),d)return this.save(),!0}return!1}register(a,b){if(F(a)){this.xi=H(b)?this.Ei:b;var c=!1;if(aB(a,(b,d)=>{a.hasOwnProperty(d)&&this.props[d]!==b&&(this.props[d]=b,c=!0)}),c)return this.save(),!0}return!1}unregister(a){a in this.props&&(delete this.props[a],this.save())}update_campaign_params(){if(!this.mi){var a=da(this.C.custom_campaign_params,this.C.mask_personal_data_properties,this.C.custom_personal_data_properties);G(aG(a))||this.register(a),this.mi=!0}}update_search_keyword(){var a;this.register((a=null==h?void 0:h.referrer)?dc(a):{})}update_referrer_info(){var a;this.register_once({$referrer:de(),$referring_domain:null!=h&&h.referrer&&(null==(a=bD(h.referrer))?void 0:a.host)||"$direct"},void 0)}set_initial_person_info(){this.props[a7]||this.props[a8]||this.register_once({[a9]:df(this.C.mask_personal_data_properties,this.C.custom_personal_data_properties)},void 0)}get_initial_props(){var a={};aB([a8,a7],b=>{var c=this.props[b];c&&aB(c,function(b,c){a["$initial_"+y(c)]=b})});var b,c,d=this.props[a9];return d&&aC(a,(b=dg(d),c={},aB(b,function(a,b){c["$initial_"+y(b)]=a}),c)),a}safe_merge(a){return aB(this.props,function(b,c){c in a||(a[c]=b)}),a}update_config(a,b,c){if(this.Ei=this.xi=a.cookie_expiration,this.set_disabled(a.disable_persistence||!!c),this.set_cross_subdomain(a.cross_subdomain_cookie),this.set_secure(a.secure_cookie),a.persistence!==b.persistence){var d=this.bi(a),e=this.props;this.clear(),this.Y=d,this.props=e,this.save()}}set_disabled(a){this.wi=a,this.wi?this.remove():this.save()}set_cross_subdomain(a){a!==this.$i&&(this.$i=a,this.remove(),this.save())}set_secure(a){a!==this.Si&&(this.Si=a,this.remove(),this.save())}set_event_timer(a,b){var c=this.props[aM]||{};c[a]=b,this.props[aM]=c,this.save()}remove_event_timer(a){var b=(this.props[aM]||{})[a];return H(b)||(delete this.props[aM][a],this.save()),b}get_property(a){return this.props[a]}set_property(a,b){this.props[a]=b,this.save()}}(e6={}).Button="button",e6.Tab="tab",e6.Selector="selector",(e7={}).TopLeft="top_left",e7.TopRight="top_right",e7.TopCenter="top_center",e7.MiddleLeft="middle_left",e7.MiddleRight="middle_right",e7.MiddleCenter="middle_center",e7.Left="left",e7.Center="center",e7.Right="right",e7.NextToTrigger="next_to_trigger";var eh=((e8={}).Popover="popover",e8.API="api",e8.Widget="widget",e8.ExternalSurvey="external_survey",e8),ei=((e9={}).Open="open",e9.MultipleChoice="multiple_choice",e9.SingleChoice="single_choice",e9.Rating="rating",e9.Link="link",(fa={}).NextQuestion="next_question",fa.End="end",fa.ResponseBased="response_based",fa.SpecificQuestion="specific_question",(fb={}).Once="once",fb.Recurring="recurring",fb.Always="always",(fc={}).SHOWN="survey shown",fc.DISMISSED="survey dismissed",fc.SENT="survey sent",fc),ej=((fd={}).SURVEY_ID="$survey_id",fd.SURVEY_NAME="$survey_name",fd.SURVEY_RESPONSE="$survey_response",fd.SURVEY_ITERATION="$survey_iteration",fd.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",fd.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",fd.SURVEY_SUBMISSION_ID="$survey_submission_id",fd.SURVEY_QUESTIONS="$survey_questions",fd.SURVEY_COMPLETED="$survey_completed",fd),ek=((fe={}).Popover="popover",fe.Inline="inline",fe);class el{constructor(){this.ki={},this.ki={}}on(a,b){return this.ki[a]||(this.ki[a]=[]),this.ki[a].push(b),()=>{this.ki[a]=this.ki[a].filter(a=>a!==b)}}emit(a,b){for(var c of this.ki[a]||[])c(b);for(var d of this.ki["*"]||[])d(a,b)}}class em{constructor(a){this.Pi=new el,this.Ti=(a,b)=>this.Ii(a,b)&&this.Ri(a,b)&&this.Ci(a,b),this.Ii=(a,b)=>null==b||!b.event||(null==a?void 0:a.event)===(null==b?void 0:b.event),this._instance=a,this.Oi=new Set,this.Fi=new Set}init(){var a,b;H(null==(a=this._instance)?void 0:a.Mi)||null==(b=this._instance)||b.Mi((a,b)=>{this.on(a,b)})}register(a){var b,c;if(!H(null==(b=this._instance)?void 0:b.Mi)&&(a.forEach(a=>{var b,c;null==(b=this.Fi)||b.add(a),null==(c=a.steps)||c.forEach(a=>{var b;null==(b=this.Oi)||b.add((null==a?void 0:a.event)||"")})}),null!=(c=this._instance)&&c.autocapture)){var d,e=new Set;a.forEach(a=>{var b;null==(b=a.steps)||b.forEach(a=>{null!=a&&a.selector&&e.add(null==a?void 0:a.selector)})}),null==(d=this._instance)||d.autocapture.setElementSelectors(e)}}on(a,b){var c;null!=b&&0!=a.length&&(this.Oi.has(a)||this.Oi.has(null==b?void 0:b.event))&&this.Fi&&(null==(c=this.Fi)?void 0:c.size)>0&&this.Fi.forEach(a=>{this.Ai(b,a)&&this.Pi.emit("actionCaptured",a.name)})}Di(a){this.onAction("actionCaptured",b=>a(b))}Ai(a,b){if(null==(null==b?void 0:b.steps))return!1;for(var c of b.steps)if(this.Ti(a,c))return!0;return!1}onAction(a,b){return this.Pi.on(a,b)}Ri(a,b){if(null!=b&&b.url){var c,d=null==a||null==(c=a.properties)?void 0:c.$current_url;if(!d||"string"!=typeof d||!em.ji(d,null==b?void 0:b.url,(null==b?void 0:b.url_matching)||"contains"))return!1}return!0}static ji(a,c,d){switch(d){case"regex":return!!b&&d0(a,c);case"exact":return c===a;case"contains":return d0(a,em.Li(c).replace(/_/g,".").replace(/%/g,".*"));default:return!1}}static Li(a){return a.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Ci(a,b){if((null!=b&&b.href||null!=b&&b.tag_name||null!=b&&b.text)&&!this.Ni(a).some(a=>!(null!=b&&b.href&&!em.ji(a.href||"",null==b?void 0:b.href,(null==b?void 0:b.href_matching)||"exact"))&&(null==b||!b.tag_name||a.tag_name===(null==b?void 0:b.tag_name))&&!(null!=b&&b.text&&!em.ji(a.text||"",null==b?void 0:b.text,(null==b?void 0:b.text_matching)||"exact")&&!em.ji(a.$el_text||"",null==b?void 0:b.text,(null==b?void 0:b.text_matching)||"exact"))))return!1;if(null!=b&&b.selector){var c,d=null==a||null==(c=a.properties)?void 0:c.$element_selectors;if(!d||!d.includes(null==b?void 0:b.selector))return!1}return!0}Ni(a){return null==(null==a?void 0:a.properties.$elements)?[]:null==a?void 0:a.properties.$elements}}var en=aw("[Surveys]"),eo="seenSurvey_",ep=a=>{var b=""+eo+a.id;return a.current_iteration&&a.current_iteration>0&&(b=""+eo+a.id+"_"+a.current_iteration),b},eq=[eh.Popover,eh.Widget,eh.API],er={ignoreConditions:!1,ignoreDelay:!1,displayType:ek.Popover};class es{constructor(a){this._instance=a,this.Ui=new Map,this.zi=new Map}register(a){var b;H(null==(b=this._instance)?void 0:b.Mi)||(this.Hi(a),this.Bi(a))}Bi(a){var b=a.filter(a=>{var b,c;return(null==(b=a.conditions)?void 0:b.actions)&&(null==(c=a.conditions)||null==(c=c.actions)||null==(c=c.values)?void 0:c.length)>0});0!==b.length&&(null==this.qi&&(this.qi=new em(this._instance),this.qi.init(),this.qi.Di(a=>{this.onAction(a)})),b.forEach(a=>{var b,c,d,e,f;a.conditions&&null!=(b=a.conditions)&&b.actions&&null!=(c=a.conditions)&&null!=(c=c.actions)&&c.values&&(null==(d=a.conditions)||null==(d=d.actions)||null==(d=d.values)?void 0:d.length)>0&&(null==(e=this.qi)||e.register(a.conditions.actions.values),null==(f=a.conditions)||null==(f=f.actions)||null==(f=f.values)||f.forEach(b=>{if(b&&b.name){var c=this.zi.get(b.name);c&&c.push(a.id),this.zi.set(b.name,c||[a.id])}}))}))}Hi(a){var b;0!==a.filter(a=>{var b,c;return(null==(b=a.conditions)?void 0:b.events)&&(null==(c=a.conditions)||null==(c=c.events)||null==(c=c.values)?void 0:c.length)>0}).length&&(null==(b=this._instance)||b.Mi((a,b)=>{this.onEvent(a,b)}),a.forEach(a=>{var b;null==(b=a.conditions)||null==(b=b.events)||null==(b=b.values)||b.forEach(b=>{if(b&&b.name){var c=this.Ui.get(b.name);c&&c.push(a.id),this.Ui.set(b.name,c||[a.id])}})}))}onEvent(a,b){var c,d,e=(null==(c=this._instance)||null==(c=c.persistence)?void 0:c.props[a2])||[];if(ei.SHOWN===a&&b&&e.length>0){en.info("survey event matched, removing survey from activated surveys",{event:a,eventPayload:b,existingActivatedSurveys:e});var f,g=null==b||null==(f=b.properties)?void 0:f.$survey_id;if(g){var h=e.indexOf(g);h>=0&&(e.splice(h,1),this.Wi(e))}}else if(this.Ui.has(a)){en.info("survey event name matched",{event:a,eventPayload:b,surveys:this.Ui.get(a)});var i=[];null==(d=this._instance)||d.getSurveys(b=>{i=b.filter(b=>{var c;return null==(c=this.Ui.get(a))?void 0:c.includes(b.id)})});var j=i.filter(c=>{var d,e=null==(d=c.conditions)||null==(d=d.events)||null==(d=d.values)?void 0:d.find(b=>b.name===a);return!!e&&(!e.propertyFilters||Object.entries(e.propertyFilters).every(a=>{var c,[d,e]=a,f=null==b||null==(c=b.properties)?void 0:c[d];if(H(f)||K(f))return!1;var g=[String(f)],h=d2[e.operator];return h?h(e.values,g):(en.warn("Unknown property comparison operator: "+e.operator),!1)}))});this.Wi(e.concat(j.map(a=>a.id)||[]))}}onAction(a){var b,c=(null==(b=this._instance)||null==(b=b.persistence)?void 0:b.props[a2])||[];this.zi.has(a)&&this.Wi(c.concat(this.zi.get(a)||[]))}Wi(a){var b;en.info("updating activated surveys",{activatedSurveys:a}),null==(b=this._instance)||null==(b=b.persistence)||b.register({[a2]:[...new Set(a)]})}getSurveys(){var a;return(null==(a=this._instance)||null==(a=a.persistence)?void 0:a.props[a2])||[]}getEventToSurveys(){return this.Ui}Gi(){return this.qi}}class et{constructor(a){this.Vi=void 0,this._surveyManager=null,this.Ji=!1,this.Ki=!1,this.Yi=[],this._instance=a,this._surveyEventReceiver=null}onRemoteConfig(a){if(!this._instance.config.disable_surveys){var b=a.surveys;if(L(b))return en.warn("Flags not loaded yet. Not loading surveys.");var c=D(b);this.Vi=c?b.length>0:b,en.info("flags response received, isSurveysEnabled: "+this.Vi),this.loadIfEnabled()}}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var a=[],b=0;b<localStorage.length;b++){var c=localStorage.key(b);(null!=c&&c.startsWith(eo)||null!=c&&c.startsWith("inProgressSurvey_"))&&a.push(c)}a.forEach(a=>localStorage.removeItem(a))}loadIfEnabled(){if(!this._surveyManager)if(this.Ki)en.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)en.info("Disabled. Not loading surveys.");else if(this._instance.config.cookieless_mode&&this._instance.consent.isOptedOut())en.info("Not loading surveys in cookieless mode without consent.");else{var a=null==n?void 0:n.__PosthogExtensions__;if(a){if(!H(this.Vi)||this._instance.config.advanced_enable_surveys){var b=this.Vi||this._instance.config.advanced_enable_surveys;this.Ki=!0;try{var c=a.generateSurveys;if(c)return void this.Xi(c,b);var d=a.loadExternalDependency;if(!d)return void this.Qi("PostHog loadExternalDependency extension not found.");d(this._instance,"surveys",c=>{c||!a.generateSurveys?this.Qi("Could not load surveys script",c):this.Xi(a.generateSurveys,b)})}catch(a){throw this.Qi("Error initializing surveys",a),a}finally{this.Ki=!1}}}else en.error("PostHog Extensions not found.")}}Xi(a,b){this._surveyManager=a(this._instance,b),this._surveyEventReceiver=new es(this._instance),en.info("Surveys loaded successfully"),this.Zi({isLoaded:!0})}Qi(a,b){en.error(a,b),this.Zi({isLoaded:!1,error:a})}onSurveysLoaded(a){return this.Yi.push(a),this._surveyManager&&this.Zi({isLoaded:!0}),()=>{this.Yi=this.Yi.filter(b=>b!==a)}}getSurveys(a,b){if(void 0===b&&(b=!1),this._instance.config.disable_surveys)return en.info("Disabled. Not loading surveys."),a([]);var c=this._instance.get_property(a1);if(c&&!b)return a(c,{isLoaded:!0});if(this.Ji)return a([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.Ji=!0,this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:b=>{this.Ji=!1;var c=b.statusCode;if(200!==c||!b.json){var d="Surveys API could not be loaded, status: "+c;return en.error(d),a([],{isLoaded:!1,error:d})}var e,f,g=b.json.surveys||[],h=g.filter(a=>{var b,c;return!(!a.start_date||a.end_date)&&(!(null==(b=a.conditions)||null==(b=b.events)||null==(b=b.values)||!b.length)||!(null==(c=a.conditions)||null==(c=c.actions)||null==(c=c.values)||!c.length))});return h.length>0&&(null==(f=this._surveyEventReceiver)||f.register(h)),null==(e=this._instance.persistence)||e.register({[a1]:g}),a(g,{isLoaded:!0})}})}catch(a){throw this.Ji=!1,a}}Zi(a){for(var b of this.Yi)try{if(!a.isLoaded)return b([],a);this.getSurveys(b)}catch(a){en.error("Error in survey callback",a)}}getActiveMatchingSurveys(a,b){if(void 0===b&&(b=!1),!L(this._surveyManager))return this._surveyManager.getActiveMatchingSurveys(a,b);en.warn("init was not called")}te(a){var b=null;return this.getSurveys(c=>{var d;b=null!=(d=c.find(b=>b.id===a))?d:null}),b}ie(a){if(L(this._surveyManager))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var b="string"==typeof a?this.te(a):a;return b?this._surveyManager.checkSurveyEligibility(b):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(a){if(L(this._surveyManager))return en.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var b=this.ie(a);return{visible:b.eligible,disabledReason:b.reason}}canRenderSurveyAsync(a,b){return L(this._surveyManager)?(en.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(c=>{this.getSurveys(b=>{var d,e=null!=(d=b.find(b=>b.id===a))?d:null;if(e){var f=this.ie(e);c({visible:f.eligible,disabledReason:f.reason})}else c({visible:!1,disabledReason:"Survey not found"})},b)})}renderSurvey(a,b){var c;if(L(this._surveyManager))en.warn("init was not called");else{var d="string"==typeof a?this.te(a):a;if(null!=d&&d.id)if(eq.includes(d.type)){var e=null==h?void 0:h.querySelector(b);if(e)return null!=(c=d.appearance)&&c.surveyPopupDelaySeconds?(en.info("Rendering survey "+d.id+" with delay of "+d.appearance.surveyPopupDelaySeconds+" seconds"),void setTimeout(()=>{var a,b;en.info("Rendering survey "+d.id+" with delay of "+(null==(a=d.appearance)?void 0:a.surveyPopupDelaySeconds)+" seconds"),null==(b=this._surveyManager)||b.renderSurvey(d,e),en.info("Survey "+d.id+" rendered")},1e3*d.appearance.surveyPopupDelaySeconds)):void this._surveyManager.renderSurvey(d,e);en.warn("Survey element not found")}else en.warn("Surveys of type "+d.type+" cannot be rendered in the app");else en.warn("Survey not found")}}displaySurvey(a,b){var c;if(L(this._surveyManager))en.warn("init was not called");else{var d=this.te(a);if(d){var e=d;if(null!=(c=d.appearance)&&c.surveyPopupDelaySeconds&&b.ignoreDelay&&(e=r({},d,{appearance:r({},d.appearance,{surveyPopupDelaySeconds:0})})),!1===b.ignoreConditions){var f=this.canRenderSurvey(d);if(!f.visible)return void en.warn("Survey is not eligible to be displayed: ",f.disabledReason)}b.displayType!==ek.Inline?this._surveyManager.handlePopoverSurvey(e):this.renderSurvey(e,b.selector)}else en.warn("Survey not found")}}}var eu=aw("[RateLimiter]");class ev{constructor(a){var b,c;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=a=>{var b=a.text;if(b&&b.length)try{(JSON.parse(b).quota_limited||[]).forEach(a=>{eu.info((a||"events")+" is quota limited."),this.serverLimits[a]=(new Date).getTime()+6e4})}catch(a){return void eu.warn('could not rate limit - continuing. Error: "'+(null==a?void 0:a.message)+'"',{text:b})}},this.instance=a,this.captureEventsPerSecond=(null==(b=a.config.rate_limiting)?void 0:b.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null==(c=a.config.rate_limiting)?void 0:c.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(a){void 0===a&&(a=!1);var b,c,d,e=(new Date).getTime(),f=null!=(b=null==(c=this.instance.persistence)?void 0:c.get_property(a6))?b:{tokens:this.captureEventsBurstLimit,last:e};f.tokens+=(e-f.last)/1e3*this.captureEventsPerSecond,f.last=e,f.tokens>this.captureEventsBurstLimit&&(f.tokens=this.captureEventsBurstLimit);var g=f.tokens<1;return g||a||(f.tokens=Math.max(0,f.tokens-1)),!g||this.lastEventRateLimited||a||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=g,null==(d=this.instance.persistence)||d.set_property(a6,f),{isRateLimited:g,remainingTokens:f.tokens}}isServerRateLimited(a){var b=this.serverLimits[a||"events"]||!1;return!1!==b&&(new Date).getTime()<b}}var ew=aw("[RemoteConfig]");class ex{constructor(a){this._instance=a}get remoteConfig(){var a;return null==(a=n._POSTHOG_REMOTE_CONFIG)||null==(a=a[this._instance.config.token])?void 0:a.config}ee(a){var b,c;null!=(b=n.__PosthogExtensions__)&&b.loadExternalDependency?null==(c=n.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,"remote-config",()=>a(this.remoteConfig)):(ew.error("PostHog Extensions not found. Cannot load remote config."),a())}re(a){this._instance.ci({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:b=>{a(b.json)}})}load(){try{if(this.remoteConfig)return ew.info("Using preloaded remote config",this.remoteConfig),void this.fi(this.remoteConfig);if(this._instance.M())return void ew.warn("Remote config is disabled. Falling back to local config.");this.ee(a=>{a?this.fi(a):(ew.info("No config found after loading remote JS config. Falling back to JSON."),this.re(a=>{this.fi(a)}))})}catch(a){ew.error("Error loading remote config",a)}}fi(a){a?this._instance.config.__preview_remote_config?(this._instance.fi(a),!1!==a.hasFeatureFlags&&this._instance.featureFlags.ensureFlagsLoaded()):ew.info("__preview_remote_config is disabled. Logging config instead",a):ew.error("Failed to fetch remote config from PostHog.")}}class ey{constructor(a,b){this.se=!0,this.ne=[],this.oe=U((null==b?void 0:b.flush_interval_ms)||3e3,250,5e3,av.createLogger("flush interval"),3e3),this.ae=a}enqueue(a){this.ne.push(a),this.le||this.ue()}unload(){this.he();var a=Object.values(this.ne.length>0?this.de():{});[...a.filter(a=>0===a.url.indexOf("/e")),...a.filter(a=>0!==a.url.indexOf("/e"))].map(a=>{this.ae(r({},a,{transport:"sendBeacon"}))})}enable(){this.se=!1,this.ue()}ue(){var a=this;this.se||(this.le=setTimeout(()=>{if(this.he(),this.ne.length>0){var b=this.de();for(var c in b)!function(){var d=b[c],e=(new Date).getTime();d.data&&D(d.data)&&aB(d.data,a=>{a.offset=Math.abs(a.timestamp-e),delete a.timestamp}),a.ae(d)}()}},this.oe))}he(){clearTimeout(this.le),this.le=void 0}de(){var a={};return aB(this.ne,b=>{var c,d=(b?b.batchKey:null)||b.url;H(a[d])&&(a[d]=r({},b,{data:[]})),null==(c=a[d].data)||c.push(b.data)}),this.ne=[],a}}var ez=["retriesPerformedSoFar"];class eA{constructor(a){this.ve=!1,this.ce=3e3,this.ne=[],this._instance=a,this.ne=[],this.fe=!0,!H(b)&&"onLine"in b.navigator&&(this.fe=b.navigator.onLine,this.pe=()=>{this.fe=!0,this.Dt()},this.ge=()=>{this.fe=!1},aJ(b,"online",this.pe),aJ(b,"offline",this.ge))}get length(){return this.ne.length}retriableRequest(a){var{retriesPerformedSoFar:b}=a,c=s(a,ez);M(b)&&b>0&&(c.url=dY(c.url,{retry_count:b})),this._instance.ci(r({},c,{callback:a=>{200!==a.statusCode&&(a.statusCode<400||a.statusCode>=500)&&(null!=b?b:0)<10?this._e(r({retriesPerformedSoFar:b},c)):null==c.callback||c.callback(a)}}))}_e(a){var b,c,d,e=a.retriesPerformedSoFar||0;a.retriesPerformedSoFar=e+1;var f=(d=(Math.random()-.5)*((c=Math.min(18e5,b=3e3*Math.pow(2,e)))-b/2),Math.ceil(c+d)),g=Date.now()+f;this.ne.push({retryAt:g,requestOptions:a});var h="Enqueued failed request for retry in "+f;navigator.onLine||(h+=" (Browser is offline)"),av.warn(h),this.ve||(this.ve=!0,this.me())}me(){(this.ye&&clearTimeout(this.ye),0===this.ne.length)?(this.ve=!1,this.ye=void 0):this.ye=setTimeout(()=>{this.fe&&this.ne.length>0&&this.Dt(),this.me()},this.ce)}Dt(){var a=Date.now(),b=[],c=this.ne.filter(c=>c.retryAt<a||(b.push(c),!1));if(this.ne=b,c.length>0)for(var{requestOptions:d}of c)this.retriableRequest(d)}unload(){for(var{requestOptions:a}of(this.ye&&(clearTimeout(this.ye),this.ye=void 0),this.ve=!1,H(b)||(this.pe&&(b.removeEventListener("online",this.pe),this.pe=void 0),this.ge&&(b.removeEventListener("offline",this.ge),this.ge=void 0)),this.ne))try{this._instance.ci(r({},a,{transport:"sendBeacon"}))}catch(a){av.error(a)}this.ne=[]}}class eB{constructor(a){this.be=()=>{this.we||(this.we={});var a,b,c,d,e=this.scrollElement(),f=this.scrollY(),g=e?Math.max(0,e.scrollHeight-e.clientHeight):0,h=f+((null==e?void 0:e.clientHeight)||0),i=(null==e?void 0:e.scrollHeight)||0;this.we.lastScrollY=Math.ceil(f),this.we.maxScrollY=Math.max(f,null!=(a=this.we.maxScrollY)?a:0),this.we.maxScrollHeight=Math.max(g,null!=(b=this.we.maxScrollHeight)?b:0),this.we.lastContentY=h,this.we.maxContentY=Math.max(h,null!=(c=this.we.maxContentY)?c:0),this.we.maxContentHeight=Math.max(i,null!=(d=this.we.maxContentHeight)?d:0)},this._instance=a}getContext(){return this.we}resetContext(){var a=this.we;return setTimeout(this.be,0),a}startMeasuringScrollPosition(){aJ(b,"scroll",this.be,{capture:!0}),aJ(b,"scrollend",this.be,{capture:!0}),aJ(b,"resize",this.be)}scrollElement(){if(!this._instance.config.scroll_root_selector)return null==b?void 0:b.document.documentElement;for(var a of D(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector]){var c=null==b?void 0:b.document.querySelector(a);if(c)return c}}scrollY(){if(this._instance.config.scroll_root_selector){var a=this.scrollElement();return a&&a.scrollTop||0}return b&&(b.scrollY||b.pageYOffset||b.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var a=this.scrollElement();return a&&a.scrollLeft||0}return b&&(b.scrollX||b.pageXOffset||b.document.documentElement.scrollLeft)||0}}var eC=a=>df(null==a?void 0:a.config.mask_personal_data_properties,null==a?void 0:a.config.custom_personal_data_properties);class eD{constructor(a,b,c,d){this.xe=a=>{var b=this.$e();if(!b||b.sessionId!==a){var c={sessionId:a,props:this.Se(this._instance)};this.Ee.register({[a5]:c})}},this._instance=a,this.ke=b,this.Ee=c,this.Se=d||eC,this.ke.onSessionId(this.xe)}$e(){return this.Ee.props[a5]}getSetOnceProps(){var a,b=null==(a=this.$e())?void 0:a.props;return b?"r"in b?dg(b):{$referring_domain:b.referringDomain,$pathname:b.initialPathName,utm_source:b.utm_source,utm_campaign:b.utm_campaign,utm_medium:b.utm_medium,utm_content:b.utm_content,utm_term:b.utm_term}:{}}getSessionProps(){var a={};return aB(aG(this.getSetOnceProps()),(b,c)=>{"$current_url"===c&&(c="url"),a["$session_entry_"+y(c)]=b}),a}}var eE=aw("[SessionId]");class eF{on(a,b){return this.Pe.on(a,b)}constructor(a,b,c){if(this.Te=[],this.Ie=void 0,this.Pe=new el,this.Re=(a,b)=>Math.abs(a-b)>this.sessionTimeoutMs,!a.persistence)throw Error("SessionIdManager requires a PostHogPersistence instance");if("always"===a.config.cookieless_mode)throw Error('SessionIdManager cannot be used with cookieless_mode="always"');this.C=a.config,this.Ee=a.persistence,this.Ce=void 0,this.Oe=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.Fe=b||bS,this.Me=c||bS;var d,e=this.C.persistence_name||this.C.token,f=this.C.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*U(f,60,36e3,eE.createLogger("session_idle_timeout_seconds"),1800),a.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Ae(),this.De="ph_"+e+"_window_id",this.je="ph_"+e+"_primary_window_exists",this.Le()){var g=b2.W(this.De),h=b2.W(this.je);g&&!h?this.Ce=g:b2.V(this.De),b2.G(this.je,!0)}if(null!=(d=this.C.bootstrap)&&d.sessionID)try{var i=(a=>{var b=a.replace(/-/g,"");if(32!==b.length)throw Error("Not a valid UUID");if("7"!==b[12])throw Error("Not a UUIDv7");return parseInt(b.substring(0,12),16)})(this.C.bootstrap.sessionID);this.Ne(this.C.bootstrap.sessionID,(new Date).getTime(),i)}catch(a){eE.error("Invalid sessionID in bootstrap",a)}this.Ue()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(a){return H(this.Te)&&(this.Te=[]),this.Te.push(a),this.Oe&&a(this.Oe,this.Ce),()=>{this.Te=this.Te.filter(b=>b!==a)}}Le(){return"memory"!==this.C.persistence&&!this.Ee.wi&&b2.H()}ze(a){a!==this.Ce&&(this.Ce=a,this.Le()&&b2.G(this.De,a))}He(){return this.Ce?this.Ce:this.Le()?b2.W(this.De):null}Ne(a,b,c){a===this.Oe&&b===this._sessionActivityTimestamp&&c===this._sessionStartTimestamp||(this._sessionStartTimestamp=c,this._sessionActivityTimestamp=b,this.Oe=a,this.Ee.register({[aW]:[b,a,c]}))}Be(){if(this.Oe&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Oe,this._sessionStartTimestamp];var a=this.Ee.props[aW];return D(a)&&2===a.length&&a.push(a[0]),a||[0,null,0]}resetSessionId(){this.Ne(null,null,null)}destroy(){clearTimeout(this.qe),this.qe=void 0,this.Ie&&b&&(b.removeEventListener("beforeunload",this.Ie,{capture:!1}),this.Ie=void 0),this.Te=[]}Ue(){this.Ie=()=>{this.Le()&&b2.V(this.je)},aJ(b,"beforeunload",this.Ie,{capture:!1})}checkAndGetSessionAndWindowId(a,b){if(void 0===a&&(a=!1),void 0===b&&(b=null),"always"===this.C.cookieless_mode)throw Error('checkAndGetSessionAndWindowId should not be called with cookieless_mode="always"');var c=b||(new Date).getTime(),[d,e,f]=this.Be(),g=this.He(),h=M(f)&&f>0&&Math.abs(c-f)>864e5,i=!1,j=!e,k=!j&&!a&&this.Re(c,d);j||k||h?(e=this.Fe(),g=this.Me(),eE.info("new session ID generated",{sessionId:e,windowId:g,changeReason:{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}}),f=c,i=!0):g||(g=this.Me(),i=!0);var l=0===d||!a||h?c:d,m=0===f?(new Date).getTime():f;return this.ze(g),this.Ne(e,l,m),a||this.Ae(),i&&this.Te.forEach(a=>a(e,g,i?{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}:void 0)),{sessionId:e,windowId:g,sessionStartTimestamp:m,changeReason:i?{noSessionId:j,activityTimeout:k,sessionPastMaximumLength:h}:void 0,lastActivityTimestamp:d}}Ae(){clearTimeout(this.qe),this.qe=setTimeout(()=>{var[a]=this.Be();if(this.Re((new Date).getTime(),a)){var b=this.Oe;this.resetSessionId(),this.Pe.emit("forcedIdleReset",{idleSessionId:b})}},1.1*this.sessionTimeoutMs)}}var eG=["$set_once","$set"],eH=aw("[SiteApps]");class eI{constructor(a){this._instance=a,this.We=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}Ge(a,b){if(b){var c=this.globalsForEvent(b);this.We.push(c),this.We.length>1e3&&(this.We=this.We.slice(10))}}get siteAppLoaders(){var a;return null==(a=n._POSTHOG_REMOTE_CONFIG)||null==(a=a[this._instance.config.token])?void 0:a.siteApps}init(){if(this.isEnabled){var a=this._instance.Mi(this.Ge.bind(this));this.Ve=()=>{a(),this.We=[],this.Ve=void 0}}}globalsForEvent(a){if(!a)throw Error("Event payload is required");var b,c,d,e,f,g,h,i={},j=this._instance.get_property("$groups")||[];for(var[k,l]of Object.entries(this._instance.get_property("$stored_group_properties")||{}))i[k]={id:j[k],type:k,properties:l};var{$set_once:m,$set:n}=a;return{event:r({},s(a,eG),{properties:r({},a.properties,n?{$set:r({},null!=(b=null==(c=a.properties)?void 0:c.$set)?b:{},n)}:{},m?{$set_once:r({},null!=(d=null==(e=a.properties)?void 0:e.$set_once)?d:{},m)}:{}),elements_chain:null!=(f=null==(g=a.properties)?void 0:g.$elements_chain)?f:"",distinct_id:null==(h=a.properties)?void 0:h.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:i}}setupSiteApp(a){var b=this.apps[a.id],c=()=>{var c;!b.errored&&this.We.length&&(eH.info("Processing "+this.We.length+" events for site app with id "+a.id),this.We.forEach(a=>null==b.processEvent?void 0:b.processEvent(a)),b.processedBuffer=!0),Object.values(this.apps).every(a=>a.processedBuffer||a.errored)&&(null==(c=this.Ve)||c.call(this))},d=!1,e=e=>{b.errored=!e,b.loaded=!0,eH.info("Site app with id "+a.id+" "+(e?"loaded":"errored")),d&&c()};try{var{processEvent:f}=a.init({posthog:this._instance,callback:a=>{e(a)}});f&&(b.processEvent=f),d=!0}catch(b){eH.error("Error while initializing PostHog app with config id "+a.id,b),e(!1)}if(d&&b.loaded)try{c()}catch(c){eH.error("Error while processing buffered events PostHog app with config id "+a.id,c),b.errored=!0}}Je(){var a=this.siteAppLoaders||[];for(var b of a)this.apps[b.id]={id:b.id,loaded:!1,errored:!1,processedBuffer:!1};for(var c of a)this.setupSiteApp(c)}Ke(a){if(0!==Object.keys(this.apps).length){var b=this.globalsForEvent(a);for(var c of Object.values(this.apps))try{null==c.processEvent||c.processEvent(b)}catch(b){eH.error("Error while processing event "+a.event+" for site app "+c.id,b)}}}onRemoteConfig(a){var b,c,d,e=this;if(null!=(b=this.siteAppLoaders)&&b.length)return this.isEnabled?(this.Je(),void this._instance.on("eventCaptured",a=>this.Ke(a))):void eH.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if(null==(c=this.Ve)||c.call(this),null!=(d=a.siteApps)&&d.length)if(this.isEnabled){var f=function(a){var b;n["__$$ph_site_app_"+a]=e._instance,null==(b=n.__PosthogExtensions__)||null==b.loadSiteApp||b.loadSiteApp(e._instance,h,b=>{if(b)return eH.error("Error while initializing PostHog app with config id "+a,b)})};for(var{id:g,url:h}of a.siteApps)f(g)}else eH.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var eJ=function(a,b){if(!a)return!1;var c=a.userAgent;if(c&&u(c,b))return!0;try{var d=null==a?void 0:a.userAgentData;if(null!=d&&d.brands&&d.brands.some(a=>u(null==a?void 0:a.brand,b)))return!0}catch(a){}return!!a.webdriver},eK=((ff={}).US="us",ff.EU="eu",ff.CUSTOM="custom",ff),eL="i.posthog.com";class eM{constructor(a){this.Ye={},this.instance=a}get apiHost(){var a=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===a?"https://us.i.posthog.com":a}get flagsApiHost(){var a=this.instance.config.flags_api_host;return a?a.trim().replace(/\/$/,""):this.apiHost}get uiHost(){var a,b=null==(a=this.instance.config.ui_host)?void 0:a.replace(/\/$/,"");return b||(b=this.apiHost.replace("."+eL,".posthog.com")),"https://app.posthog.com"===b?"https://us.posthog.com":b}get region(){return this.Ye[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Ye[this.apiHost]=eK.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.Ye[this.apiHost]=eK.EU:this.Ye[this.apiHost]=eK.CUSTOM),this.Ye[this.apiHost]}endpointFor(a,b){if(void 0===b&&(b=""),b&&(b="/"===b[0]?b:"/"+b),"ui"===a)return this.uiHost+b;if("flags"===a)return this.flagsApiHost+b;if(this.region===eK.CUSTOM)return this.apiHost+b;var c=eL+b;switch(a){case"assets":return"https://"+this.region+"-assets."+c;case"api":return"https://"+this.region+"."+c}}}var eN={icontains:(a,c)=>!!b&&c.href.toLowerCase().indexOf(a.toLowerCase())>-1,not_icontains:(a,c)=>!!b&&-1===c.href.toLowerCase().indexOf(a.toLowerCase()),regex:(a,c)=>!!b&&d0(c.href,a),not_regex:(a,c)=>!!b&&!d0(c.href,a),exact:(a,b)=>b.href===a,is_not:(a,b)=>b.href!==a};class eO{constructor(a){var b=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(a){void 0===a&&(a=!1),b.getWebExperiments(a=>{eO.Xe("retrieved web experiments from the server"),b.Qe=new Map,a.forEach(a=>{if(a.feature_flag_key){b.Qe&&(eO.Xe("setting flag key ",a.feature_flag_key," to web experiment ",a),null==(c=b.Qe)||c.set(a.feature_flag_key,a));var c,d=b._instance.getFeatureFlag(a.feature_flag_key);I(d)&&a.variants[d]&&b.Ze(a.name,d,a.variants[d].transforms)}else if(a.variants)for(var e in a.variants){var f=a.variants[e];eO.tr(f)&&b.Ze(a.name,e,f.transforms)}})},a)},this._instance=a,this._instance.onFeatureFlags(a=>{this.onFeatureFlags(a)})}onFeatureFlags(a){if(this._is_bot())eO.Xe("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(L(this.Qe))return this.Qe=new Map,this.loadIfEnabled(),void this.previewWebExperiment();eO.Xe("applying feature flags",a),a.forEach(a=>{var b;if(this.Qe&&null!=(b=this.Qe)&&b.has(a)){var c,d=this._instance.getFeatureFlag(a),e=null==(c=this.Qe)?void 0:c.get(a);d&&null!=e&&e.variants[d]&&this.Ze(e.name,d,e.variants[d].transforms)}})}}previewWebExperiment(){var a=eO.getWindowLocation();if(null!=a&&a.search){var b=bF(null==a?void 0:a.search,"__experiment_id"),c=bF(null==a?void 0:a.search,"__experiment_variant");b&&c&&(eO.Xe("previewing web experiments "+b+" && "+c),this.getWebExperiments(a=>{this.ir(parseInt(b),c,a)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(a,b,c){if(this._instance.config.disable_web_experiments&&!c)return a([]);var d=this._instance.get_property("$web_experiments");if(d&&!b)return a(d);this._instance.ci({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:b=>200===b.statusCode&&b.json?a(b.json.experiments||[]):a([])})}ir(a,b,c){var d=c.filter(b=>b.id===a);d&&d.length>0&&(eO.Xe("Previewing web experiment ["+d[0].name+"] with variant ["+b+"]"),this.Ze(d[0].name,b,d[0].variants[b].transforms))}static tr(a){return!L(a.conditions)&&eO.er(a)&&eO.rr(a)}static er(a){if(L(a.conditions)||L(null==(b=a.conditions)?void 0:b.url))return!0;var b,c,d,e,f=eO.getWindowLocation();return!!f&&(null==(c=a.conditions)||!c.url||eN[null!=(d=null==(e=a.conditions)?void 0:e.urlMatchType)?d:"icontains"](a.conditions.url,f))}static getWindowLocation(){return null==b?void 0:b.location}static rr(a){if(L(a.conditions)||L(null==(c=a.conditions)?void 0:c.utm))return!0;var b=da();if(b.utm_source){var c,d,e,f,g,h,i,j,k,l=null==(d=a.conditions)||null==(d=d.utm)||!d.utm_campaign||(null==(e=a.conditions)||null==(e=e.utm)?void 0:e.utm_campaign)==b.utm_campaign,m=null==(f=a.conditions)||null==(f=f.utm)||!f.utm_source||(null==(g=a.conditions)||null==(g=g.utm)?void 0:g.utm_source)==b.utm_source,n=null==(h=a.conditions)||null==(h=h.utm)||!h.utm_medium||(null==(i=a.conditions)||null==(i=i.utm)?void 0:i.utm_medium)==b.utm_medium,o=null==(j=a.conditions)||null==(j=j.utm)||!j.utm_term||(null==(k=a.conditions)||null==(k=k.utm)?void 0:k.utm_term)==b.utm_term;return l&&n&&o&&m}return!1}static Xe(a){for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];av.info("[WebExperiments] "+a,c)}Ze(a,b,c){this._is_bot()?eO.Xe("Refusing to render web experiment since the viewer is a likely bot"):"control"!==b?c.forEach(c=>{if(c.selector){eO.Xe("applying transform of variant "+b+" for experiment "+a+" ",c);var d,e=null==(d=document)?void 0:d.querySelectorAll(c.selector);null==e||e.forEach(a=>{c.html&&(a.innerHTML=c.html),c.css&&a.setAttribute("style",c.css)})}}):eO.Xe("Control variants leave the page unmodified.")}_is_bot(){return g&&this._instance?eJ(g,this._instance.config.custom_blocked_useragents):void 0}}var eP=aw("[PostHog ExternalIntegrations]"),eQ={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};class eR{constructor(a){this._instance=a}it(a,b){var c;null==(c=n.__PosthogExtensions__)||null==c.loadExternalDependency||c.loadExternalDependency(this._instance,a,a=>{if(a)return eP.error("failed to load script",a);b()})}startIfEnabledOrStop(){var a,b=this,c=function(a){var c,d,f;!e||null!=(c=n.__PosthogExtensions__)&&null!=(c=c.integrations)&&c[a]||b.it(eQ[a],()=>{var c;null==(c=n.__PosthogExtensions__)||null==(c=c.integrations)||null==(c=c[a])||c.start(b._instance)}),!e&&null!=(d=n.__PosthogExtensions__)&&null!=(d=d.integrations)&&d[a]&&(null==(f=n.__PosthogExtensions__)||null==(f=f.integrations)||null==(f=f[a])||f.stop())};for(var[d,e]of Object.entries(null!=(a=this._instance.config.integrations)?a:{}))c(d)}}var eS="[SessionRecording]",eT=aw(eS);class eU{get started(){var a;return!(null==(a=this.sr)||!a.isStarted)}get status(){return this.sr?this.sr.status:this.nr&&!this.ar?"disabled":"lazy_loading"}constructor(a){if(this._forceAllowLocalhostNetworkCapture=!1,this.nr=!1,this.lr=void 0,this._instance=a,!this._instance.sessionManager)throw eT.error("started without valid sessionManager"),Error(eS+" started without valid sessionManager. This is a bug.");if("always"===this._instance.config.cookieless_mode)throw Error(eS+' cannot be used with cookieless_mode="always"')}get ar(){var a,c=!(null==(a=this._instance.get_property(aV))||!a.enabled),d=!this._instance.config.disable_session_recording,e=this._instance.config.disable_session_recording||this._instance.consent.isOptedOut();return b&&c&&d&&!e}startIfEnabledOrStop(a){var b;if(!this.ar||null==(b=this.sr)||!b.isStarted){var c=!H(Object.assign)&&!H(Array.from);this.ar&&c?(this.ur(a),eT.info("starting")):this.stopRecording()}}ur(a){var b,c,d;this.ar&&(null!=n&&null!=(b=n.__PosthogExtensions__)&&null!=(b=b.rrweb)&&b.record&&null!=(c=n.__PosthogExtensions__)&&c.initSessionRecording?this.hr(a):null==(d=n.__PosthogExtensions__)||null==d.loadExternalDependency||d.loadExternalDependency(this._instance,this.dr,b=>{if(b)return eT.error("could not load recorder",b);this.hr(a)}))}stopRecording(){var a,b;null==(a=this.lr)||a.call(this),this.lr=void 0,null==(b=this.sr)||b.stop()}vr(){var a;null==(a=this._instance.persistence)||a.unregister(aX)}cr(a){if(this._instance.persistence){var b,c,d=this._instance.persistence,e=()=>{var b=!1===a.sessionRecording?void 0:a.sessionRecording,c=null==b?void 0:b.sampleRate,e=L(c)?null:parseFloat(c);L(e)&&this.vr();var f=null==b?void 0:b.minimumDurationMilliseconds;d.register({[aV]:r({enabled:!!b},b,{networkPayloadCapture:r({capturePerformance:a.capturePerformance},null==b?void 0:b.networkPayloadCapture),canvasRecording:{enabled:null==b?void 0:b.recordCanvas,fps:null==b?void 0:b.canvasFps,quality:null==b?void 0:b.canvasQuality},sampleRate:e,minimumDurationMilliseconds:H(f)?null:f,endpoint:null==b?void 0:b.endpoint,triggerMatchType:null==b?void 0:b.triggerMatchType,masking:null==b?void 0:b.masking,urlTriggers:null==b?void 0:b.urlTriggers})})};e(),null==(b=this.lr)||b.call(this),this.lr=null==(c=this._instance.sessionManager)?void 0:c.onSessionId(e)}}onRemoteConfig(a){"sessionRecording"in a?!1!==a.sessionRecording?(this.cr(a),this.nr=!0,this.startIfEnabledOrStop()):this.nr=!0:eT.info("skipping remote config with no sessionRecording",a)}log(a,b){var c;void 0===b&&(b="log"),null!=(c=this.sr)&&c.log?this.sr.log(a,b):eT.warn("log called before recorder was ready")}get dr(){var a,b,c=null==(a=this._instance)||null==(a=a.persistence)?void 0:a.get_property(aV);return(null==c||null==(b=c.scriptConfig)?void 0:b.script)||"lazy-recorder"}hr(a){var b,c;if(null==(b=n.__PosthogExtensions__)||!b.initSessionRecording)throw Error("Called on script loaded before session recording is available");this.sr||(this.sr=null==(c=n.__PosthogExtensions__)?void 0:c.initSessionRecording(this._instance),this.sr._forceAllowLocalhostNetworkCapture=this._forceAllowLocalhostNetworkCapture),this.sr.start(a)}onRRwebEmit(a){var b;null==(b=this.sr)||null==b.onRRwebEmit||b.onRRwebEmit(a)}overrideLinkedFlag(){var a,b;this.sr||null==(b=this._instance.persistence)||b.register({$replay_override_linked_flag:!0}),null==(a=this.sr)||a.overrideLinkedFlag()}overrideSampling(){var a,b;this.sr||null==(b=this._instance.persistence)||b.register({$replay_override_sampling:!0}),null==(a=this.sr)||a.overrideSampling()}overrideTrigger(a){var b,c;this.sr||null==(c=this._instance.persistence)||c.register({["url"===a?"$replay_override_url_trigger":"$replay_override_event_trigger"]:!0}),null==(b=this.sr)||b.overrideTrigger(a)}get sdkDebugProperties(){var a;return(null==(a=this.sr)?void 0:a.sdkDebugProperties)||{$recording_status:this.status}}tryAddCustomEvent(a,b){var c;return!(null==(c=this.sr)||!c.tryAddCustomEvent(a,b))}}var eV={},eW=()=>{},eX="posthog",eY=!dW&&-1===(null==m?void 0:m.indexOf("MSIE"))&&-1===(null==m?void 0:m.indexOf("Mozilla")),eZ=a=>{var c;return{api_host:"https://us.i.posthog.com",flags_api_host:null,ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:function(a){var b=null==a?void 0:a.hostname;if(!I(b))return!1;var c=b.split(".").slice(-2).join(".");for(var d of aH)if(c===d)return!1;return!0}(null==h?void 0:h.location),persistence:"localStorage+cookie",persistence_name:"",loaded:eW,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:"2025-05-24"!==a||"history_change",capture_pageleave:"if_capture_pageview",defaults:null!=a?a:"unset",__preview_deferred_init_extensions:!1,debug:i&&I(null==i?void 0:i.search)&&-1!==i.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==b||null==(c=b.location)?void 0:c.protocol),ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",consent_persistence_name:null,opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_enable_surveys:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:a=>{var b="Bad HTTP status: "+a.statusCode+" "+a.text;av.error(b)},get_device_id:a=>a,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:3e3},error_tracking:{},_onCapture:eW,__preview_eager_load_replay:!1}},e$=a=>{var b={};H(a.process_person)||(b.person_profiles=a.process_person),H(a.xhr_headers)||(b.request_headers=a.xhr_headers),H(a.cookie_name)||(b.persistence_name=a.cookie_name),H(a.disable_cookie)||(b.disable_persistence=a.disable_cookie),H(a.store_google)||(b.save_campaign_params=a.store_google),H(a.verbose)||(b.debug=a.verbose);var c=aC({},b,a);return D(a.property_blacklist)&&(H(a.property_denylist)?c.property_denylist=a.property_blacklist:D(a.property_denylist)?c.property_denylist=[...a.property_blacklist,...a.property_denylist]:av.error("Invalid value for property_denylist config: "+a.property_denylist)),c};class e_{constructor(){this.__forceAllowLocalhost=!1}get pr(){return this.__forceAllowLocalhost}set pr(a){av.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=a}}class e0{get decideEndpointWasHit(){var a,b;return null!=(a=null==(b=this.featureFlags)?void 0:b.hasLoadedFlags)&&a}get flagsEndpointWasHit(){var a,b;return null!=(a=null==(b=this.featureFlags)?void 0:b.hasLoadedFlags)&&a}constructor(){this.webPerformance=new e_,this.gr=!1,this.version=o.LIB_VERSION,this._r=new el,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=eZ(),this.SentryIntegration=cf,this.sentryIntegration=a=>{var b;return b=ce(this,a),{name:cd,processEvent:a=>b(a)}},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.mr=!1,this.yr=null,this.br=null,this.wr=null,this.featureFlags=new ee(this),this.toolbar=new ci(this),this.scrollManager=new eB(this),this.pageViewManager=new dn(this),this.surveys=new et(this),this.experiments=new eO(this),this.exceptions=new d5(this),this.rateLimiter=new ev(this),this.requestRouter=new eM(this),this.consent=new b4(this),this.externalIntegrations=new eR(this),this.people={set:(a,b,c)=>{var d=I(a)?{[a]:b}:a;this.setPersonProperties(d),null==c||c({})},set_once:(a,b,c)=>{var d=I(a)?{[a]:b}:a;this.setPersonProperties(void 0,d),null==c||c({})}},this.on("eventCaptured",a=>av.info('send "'+(null==a?void 0:a.event)+'"',a))}init(a,b,c){if(c&&c!==eX){var d,e=null!=(d=eV[c])?d:new e0;return e._init(a,b,c),eV[c]=e,eV[eX][c]=e,e}return this._init(a,b,c)}_init(a,c,d){if(void 0===c&&(c={}),H(a)||J(a))return av.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return console.warn("[PostHog.js]","You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},c.debug=this.$r(c.debug),this.Sr=c,this.Er=[],c.person_profiles&&(this.br=c.person_profiles),this.set_config(aC({},eZ(c.defaults),e$(c),{name:d,token:a})),this.config.on_xhr_error&&av.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=c.disable_compression?void 0:bC.GZipJS;var e=this.kr();this.persistence=new eg(this.config,e),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new eg(r({},this.config,{persistence:"sessionStorage"}),e);var f=r({},this.persistence.props),g=r({},this.sessionPersistence.props);this.register({$initialization_time:(new Date).toISOString()}),this.Pr=new ey(a=>this.Tr(a),this.config.request_queue_config),this.Ir=new eA(this),this.__request_queue=[];var h="always"===this.config.cookieless_mode||"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut();if(h||(this.sessionManager=new eF(this),this.sessionPropsManager=new eD(this,this.sessionManager,this.persistence)),this.config.__preview_deferred_init_extensions?(av.info("Deferring extension initialization to improve startup performance"),setTimeout(()=>{this.Rr(h)},0)):(av.info("Initializing extensions synchronously"),this.Rr(h)),o.DEBUG=o.DEBUG||this.config.debug,o.DEBUG&&av.info("Starting in debug mode",{this:this,config:c,thisC:r({},this.config),p:f,s:g}),void 0!==(null==(i=c.bootstrap)?void 0:i.distinctID)){var i,j,k,l=this.config.get_device_id(bS()),m=null!=(j=c.bootstrap)&&j.isIdentifiedID?l:c.bootstrap.distinctID;this.persistence.set_property(a4,null!=(k=c.bootstrap)&&k.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:c.bootstrap.distinctID,$device_id:m})}if(this.Cr()){var n,p,q=Object.keys((null==(n=c.bootstrap)?void 0:n.featureFlags)||{}).filter(a=>{var b;return!(null==(b=c.bootstrap)||null==(b=b.featureFlags)||!b[a])}).reduce((a,b)=>{var d;return a[b]=(null==(d=c.bootstrap)||null==(d=d.featureFlags)?void 0:d[b])||!1,a},{}),s=Object.keys((null==(p=c.bootstrap)?void 0:p.featureFlagPayloads)||{}).filter(a=>q[a]).reduce((a,b)=>{var d,e;return null!=(d=c.bootstrap)&&null!=(d=d.featureFlagPayloads)&&d[b]&&(a[b]=null==(e=c.bootstrap)||null==(e=e.featureFlagPayloads)?void 0:e[b]),a},{});this.featureFlags.receivedFeatureFlags({featureFlags:q,featureFlagPayloads:s})}if(h)this.register_once({distinct_id:bc,$device_id:null},"");else if(!this.get_distinct_id()){var t=this.config.get_device_id(bS());this.register_once({distinct_id:t,$device_id:t},""),this.persistence.set_property(a4,"anonymous")}return aJ(b,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),c.segment?function(a,b){var c=a.config.segment;if(!c)return b();!function(a,b){var c=a.config.segment;if(!c)return b();var d=c=>{var d=()=>c.anonymousId()||bS();a.config.get_device_id=d,c.id()&&(a.register({distinct_id:c.id(),$device_id:d()}),a.persistence.set_property(a4,"identified")),b()},e=c.user();"then"in e&&E(e.then)?e.then(a=>d(a)):d(e)}(a,()=>{var d;c.register((Promise&&Promise.resolve||cc.warn("This browser does not have Promise support, and can not use the segment integration"),d=(b,c)=>{if(!c)return b;b.event.userId||b.event.anonymousId===a.get_distinct_id()||(cc.info("No userId set, resetting PostHog"),a.reset()),b.event.userId&&b.event.userId!==a.get_distinct_id()&&(cc.info("UserId set, identifying with PostHog"),a.identify(b.event.userId));var d=a.calculateEventProperties(c,b.event.properties);return b.event.properties=Object.assign({},d,b.event.properties),b},{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:a=>d(a,a.event.event),page:a=>d(a,"$pageview"),identify:a=>d(a,"$identify"),screen:a=>d(a,"$screen")})).then(()=>{b()})})}(this,()=>this.Or()):this.Or(),E(this.config._onCapture)&&this.config._onCapture!==eW&&(av.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",a=>this.config._onCapture(a.event,a))),this.config.ip&&av.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Rr(a){var b=performance.now();this.historyAutocapture=new cb(this),this.historyAutocapture.startIfEnabled();var c=[];c.push(()=>{new ck(this).startIfEnabledOrStop()}),c.push(()=>{var a;this.siteApps=new eI(this),null==(a=this.siteApps)||a.init()}),a||c.push(()=>{this.sessionRecording=new eU(this),this.sessionRecording.startIfEnabledOrStop()}),this.config.disable_scroll_properties||c.push(()=>{this.scrollManager.startMeasuringScrollPosition()}),c.push(()=>{this.autocapture=new bK(this),this.autocapture.startIfEnabled()}),c.push(()=>{this.surveys.loadIfEnabled()}),c.push(()=>{this.heatmaps=new dm(this),this.heatmaps.startIfEnabled()}),c.push(()=>{this.webVitalsAutocapture=new dj(this)}),c.push(()=>{this.exceptionObserver=new ca(this),this.exceptionObserver.startIfEnabled()}),c.push(()=>{this.deadClicksAutocapture=new b8(this,b7),this.deadClicksAutocapture.startIfEnabled()}),c.push(()=>{if(this.Fr){var a=this.Fr;this.Fr=void 0,this.fi(a)}}),this.Mr(c,b)}Mr(a,b){for(;a.length>0;){if(this.config.__preview_deferred_init_extensions&&performance.now()-b>=30&&a.length>0)return void setTimeout(()=>{this.Mr(a,b)},0);var c=a.shift();if(c)try{c()}catch(a){av.error("Error initializing extension:",a)}}var d=Math.round(performance.now()-b);this.register_for_session({$sdk_debug_extensions_init_method:this.config.__preview_deferred_init_extensions?"deferred":"synchronous",$sdk_debug_extensions_init_time_ms:d}),this.config.__preview_deferred_init_extensions&&av.info("PostHog extensions initialized ("+d+"ms)")}fi(a){var b,c,d,e,f,g,i,j;h&&h.body?(this.config.__preview_deferred_init_extensions&&(this.Fr=a),this.compression=void 0,a.supportedCompression&&!this.config.disable_compression&&(this.compression=w(a.supportedCompression,bC.GZipJS)?bC.GZipJS:w(a.supportedCompression,bC.Base64)?bC.Base64:void 0),null!=(b=a.analytics)&&b.endpoint&&(this.analyticsDefaultEndpoint=a.analytics.endpoint),this.set_config({person_profiles:this.br?this.br:"identified_only"}),null==(c=this.siteApps)||c.onRemoteConfig(a),null==(d=this.sessionRecording)||d.onRemoteConfig(a),null==(e=this.autocapture)||e.onRemoteConfig(a),null==(f=this.heatmaps)||f.onRemoteConfig(a),this.surveys.onRemoteConfig(a),null==(g=this.webVitalsAutocapture)||g.onRemoteConfig(a),null==(i=this.exceptionObserver)||i.onRemoteConfig(a),this.exceptions.onRemoteConfig(a),null==(j=this.deadClicksAutocapture)||j.onRemoteConfig(a)):(av.info("document not ready yet, trying again in 500 milliseconds..."),setTimeout(()=>{this.fi(a)},500))}Or(){try{this.config.loaded(this)}catch(a){av.critical("`loaded` function failed",a)}this.Ar(),this.config.capture_pageview&&setTimeout(()=>{(this.consent.isOptedIn()||"always"===this.config.cookieless_mode)&&this.Dr()},1),new ex(this).load(),this.featureFlags.flags()}Ar(){var a;this.is_capturing()&&this.config.request_batching&&(null==(a=this.Pr)||a.enable())}_dom_loaded(){this.is_capturing()&&aA(this.__request_queue,a=>this.Tr(a)),this.__request_queue=[],this.Ar()}_handle_unload(){var a,b;this.config.request_batching?(this.jr()&&this.capture("$pageleave"),null==(a=this.Pr)||a.unload(),null==(b=this.Ir)||b.unload()):this.jr()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}ci(a){this.__loaded&&(eY?this.__request_queue.push(a):this.rateLimiter.isServerRateLimited(a.batchKey)||(a.transport=a.transport||this.config.api_transport,a.url=dY(a.url,{ip:+!!this.config.ip}),a.headers=r({},this.config.request_headers),a.compression="best-available"===a.compression?this.compression:a.compression,a.disableXHRCredentials=this.config.__preview_disable_xhr_credentials,this.config.__preview_disable_beacon&&(a.disableTransport=["sendBeacon"]),a.fetchOptions=a.fetchOptions||this.config.fetch_options,(a=>{var b,c,d,e=r({},a);e.timeout=e.timeout||6e4,e.url=dY(e.url,{_:(new Date).getTime().toString(),ver:o.LIB_VERSION,compression:e.compression});var f=null!=(b=e.transport)?b:"fetch",g=d_.filter(a=>!e.disableTransport||!a.transport||!e.disableTransport.includes(a.transport)),h=null!=(c=null==(d=aI(g,a=>a.transport===f))?void 0:d.method)?c:g[0].method;if(!h)throw Error("No available transport method");h(e)})(r({},a,{callback:b=>{var c,d;this.rateLimiter.checkForLimiting(b),b.statusCode>=400&&(null==(c=(d=this.config).on_request_error)||c.call(d,b)),null==a.callback||a.callback(b)}}))))}Tr(a){this.Ir?this.Ir.retriableRequest(a):this.ci(a)}_execute_array(a){var b,c=[],d=[],e=[];aA(a,a=>{a&&(D(b=a[0])?e.push(a):E(a)?a.call(this):D(a)&&"alias"===b?c.push(a):D(a)&&-1!==b.indexOf("capture")&&E(this[b])?e.push(a):d.push(a))});var f=function(a,b){aA(a,function(a){if(D(a[0])){var c=b;aB(a,function(a){c=c[a[0]].apply(c,a.slice(1))})}else this[a[0]].apply(this,a.slice(1))},b)};f(c,this),f(d,this),f(e,this)}Cr(){var a,b;return(null==(a=this.config.bootstrap)?void 0:a.featureFlags)&&Object.keys(null==(b=this.config.bootstrap)?void 0:b.featureFlags).length>0||!1}push(a){this._execute_array([a])}capture(a,b,c){var d;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.Pr){if(this.is_capturing())if(!H(a)&&I(a)){var e=!this.config.opt_out_useragent_filter&&this._is_bot();if(!(e&&!this.config.__preview_capture_bot_pageviews)){var f=null!=c&&c.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==f||!f.isRateLimited){null!=b&&b.$current_url&&!I(null==b?void 0:b.$current_url)&&(av.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),null==b||delete b.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var g=new Date,h=(null==c?void 0:c.timestamp)||g,i=bS(),j={uuid:i,event:a,properties:this.calculateEventProperties(a,b||{},h,i)};"$pageview"===a&&this.config.__preview_capture_bot_pageviews&&e&&(j.event="$bot_pageview",j.properties.$browser_type="bot"),f&&(j.properties.$lib_rate_limit_remaining_tokens=f.remainingTokens),(null==c?void 0:c.$set)&&(j.$set=null==c?void 0:c.$set);var k,l=this.Lr(null==c?void 0:c.$set_once);if(l&&(j.$set_once=l),(m=j,n=null!=c&&c._noTruncate?null:this.config.properties_string_max_length,o=a=>I(a)&&!K(n)?a.slice(0,n):a,p=new Set,j=function a(b,c){var d;return b!==Object(b)?o?o(b,c):b:p.has(b)?void 0:(p.add(b),D(b)?(d=[],aA(b,b=>{d.push(a(b))})):(d={},aB(b,(b,c)=>{p.has(b)||(d[c]=a(b,c))})),d)}(m)).timestamp=h,H(null==c?void 0:c.timestamp)||(j.properties.$event_time_override_provided=!0,j.properties.$event_time_override_system_time=g),a===ei.DISMISSED||a===ei.SENT){var m,n,o,p,q,s,t,u=null==b?void 0:b[ej.SURVEY_ID],v=null==b?void 0:b[ej.SURVEY_ITERATION];k={id:u,current_iteration:v},localStorage.getItem(ep(k))||localStorage.setItem(ep(k),"true"),j.$set=r({},j.$set,{[(q={id:u,current_iteration:v},t="$survey_"+(s=a===ei.SENT?"responded":"dismissed")+"/"+q.id,q.current_iteration&&q.current_iteration>0&&(t="$survey_"+s+"/"+q.id+"/"+q.current_iteration),t)]:!0})}var w=r({},j.properties.$set,j.$set);if(G(w)||this.setPersonPropertiesForFlags(w),!L(this.config.before_send)){var x=this.Nr(j);if(!x)return;j=x}this._r.emit("eventCaptured",j);var y={method:"POST",url:null!=(d=null==c?void 0:c._url)?d:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:j,compression:"best-available",batchKey:null==c?void 0:c._batchKey};return!this.config.request_batching||c&&(null==c||!c._batchKey)||null!=c&&c.send_instantly?this.Tr(y):this.Pr.enqueue(y),j}av.critical("This capture call is ignored due to client rate limiting.")}}else av.error("No event name provided to posthog.capture")}else av.uninitializedWarning("posthog.capture")}Mi(a){return this.on("eventCaptured",b=>a(b.event,b))}calculateEventProperties(a,c,d,e,f){if(d=d||new Date,!this.persistence||!this.sessionPersistence)return c;var g,j=f?void 0:this.persistence.remove_event_timer(a),k=r({},c);if(k.token=this.config.token,k.$config_defaults=this.config.defaults,("always"==this.config.cookieless_mode||"on_reject"==this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut())&&(k.$cookieless_mode=!0),"$snapshot"===a){var l=r({},this.persistence.properties(),this.sessionPersistence.properties());return k.distinct_id=l.distinct_id,(!I(k.distinct_id)&&!M(k.distinct_id)||J(k.distinct_id))&&av.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),k}var n,p=function(a,c){if(!m)return{};var d,e,f=a?aD([],c6,c||[]):[],[g,h]=function(a){for(var b=0;b<c3.length;b++){var[c,d]=c3[b],e=c.exec(a),f=e&&(E(d)?d(e,a):d);if(f)return f}return["",""]}(m);return aC(aG({$os:g,$os_version:h,$browser:c0(m,navigator.vendor),$device:c4(m),$device_type:(e=c4(m))===cp||e===co||"Kobo"===e||"Kindle Fire"===e||e===cT?cn:e===cI||e===cK||e===cJ||e===cQ?"Console":e===cr?"Wearable":e?cl:"Desktop",$timezone:dh(),$timezone_offset:function(){try{return(new Date).getTimezoneOffset()}catch(a){return}}()}),{$current_url:bG(null==i?void 0:i.href,f,c8),$host:null==i?void 0:i.host,$pathname:null==i?void 0:i.pathname,$raw_user_agent:m.length>1e3?m.substring(0,997)+"...":m,$browser_version:c2(m,navigator.vendor),$browser_language:dd(),$browser_language_prefix:"string"==typeof(d=dd())?d.split("-")[0]:void 0,$screen_height:null==b?void 0:b.screen.height,$screen_width:null==b?void 0:b.screen.width,$viewport_height:null==b?void 0:b.innerHeight,$viewport_width:null==b?void 0:b.innerWidth,$lib:"web",$lib_version:o.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:q,windowId:s}=this.sessionManager.checkAndGetSessionAndWindowId(f,d.getTime());k.$session_id=q,k.$window_id=s}this.sessionPropsManager&&aC(k,this.sessionPropsManager.getSessionProps());try{this.sessionRecording&&aC(k,this.sessionRecording.sdkDebugProperties),k.$sdk_debug_retry_queue_size=null==(g=this.Ir)?void 0:g.length}catch(a){k.$sdk_debug_error_capturing_properties=String(a)}if(this.requestRouter.region===eK.CUSTOM&&(k.$lib_custom_api_host=this.config.api_host),n="$pageview"!==a||f?"$pageleave"!==a||f?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(d):this.pageViewManager.doPageView(d,e),k=aC(k,n),"$pageview"===a&&h&&(k.title=h.title),!H(j)){var t=d.getTime()-j;k.$duration=parseFloat((t/1e3).toFixed(3))}m&&this.config.opt_out_useragent_filter&&(k.$browser_type=this._is_bot()?"bot":"browser"),(k=aC({},p,this.persistence.properties(),this.sessionPersistence.properties(),k)).$is_identified=this._isIdentified(),D(this.config.property_denylist)?aB(this.config.property_denylist,function(a){delete k[a]}):av.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var u=this.config.sanitize_properties;u&&(av.error("sanitize_properties is deprecated. Use before_send instead"),k=u(k,a));var v=this.Ur();return k.$process_person_profile=v,v&&!f&&this.zr("_calculate_event_properties"),k}Lr(a){if(!this.persistence||!this.Ur()||this.gr)return a;var b,c=aC({},this.persistence.get_initial_props(),(null==(b=this.sessionPropsManager)?void 0:b.getSetOnceProps())||{},a||{}),d=this.config.sanitize_properties;return d&&(av.error("sanitize_properties is deprecated. Use before_send instead"),c=d(c,"$set_once")),this.gr=!0,G(c)?void 0:c}register(a,b){var c;null==(c=this.persistence)||c.register(a,b)}register_once(a,b,c){var d;null==(d=this.persistence)||d.register_once(a,b,c)}register_for_session(a){var b;null==(b=this.sessionPersistence)||b.register(a)}unregister(a){var b;null==(b=this.persistence)||b.unregister(a)}unregister_for_session(a){var b;null==(b=this.sessionPersistence)||b.unregister(a)}Hr(a,b){this.register({[a]:b})}getFeatureFlag(a,b){return this.featureFlags.getFeatureFlag(a,b)}getFeatureFlagPayload(a){var b=this.featureFlags.getFeatureFlagPayload(a);try{return JSON.parse(b)}catch(a){return b}}isFeatureEnabled(a,b){return this.featureFlags.isFeatureEnabled(a,b)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(a,b,c){this.featureFlags.updateEarlyAccessFeatureEnrollment(a,b,c)}getEarlyAccessFeatures(a,b,c){return void 0===b&&(b=!1),this.featureFlags.getEarlyAccessFeatures(a,b,c)}on(a,b){return this._r.on(a,b)}onFeatureFlags(a){return this.featureFlags.onFeatureFlags(a)}onSurveysLoaded(a){return this.surveys.onSurveysLoaded(a)}onSessionId(a){var b,c;return null!=(b=null==(c=this.sessionManager)?void 0:c.onSessionId(a))?b:()=>{}}getSurveys(a,b){void 0===b&&(b=!1),this.surveys.getSurveys(a,b)}getActiveMatchingSurveys(a,b){void 0===b&&(b=!1),this.surveys.getActiveMatchingSurveys(a,b)}renderSurvey(a,b){this.surveys.renderSurvey(a,b)}displaySurvey(a,b){void 0===b&&(b=er),this.surveys.displaySurvey(a,b)}canRenderSurvey(a){return this.surveys.canRenderSurvey(a)}canRenderSurveyAsync(a,b){return void 0===b&&(b=!1),this.surveys.canRenderSurveyAsync(a,b)}identify(a,b,c){if(!this.__loaded||!this.persistence)return av.uninitializedWarning("posthog.identify");if(M(a)&&(a=a.toString(),av.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),a)if(["distinct_id","distinctid"].includes(a.toLowerCase()))av.critical('The string "'+a+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(a!==bc){if(this.zr("posthog.identify")){var d=this.get_distinct_id();this.register({$user_id:a}),this.get_property("$device_id")||this.register_once({$had_persisted_distinct_id:!0,$device_id:d},""),a!==d&&a!==this.get_property(aL)&&(this.unregister(aL),this.register({distinct_id:a}));var e="anonymous"===(this.persistence.get_property(a4)||"anonymous");a!==d&&e?(this.persistence.set_property(a4,"identified"),this.setPersonPropertiesForFlags(r({},c||{},b||{}),!1),this.capture("$identify",{distinct_id:a,$anon_distinct_id:d},{$set:b||{},$set_once:c||{}}),this.wr=d1(a,b,c),this.featureFlags.setAnonymousDistinctId(d)):(b||c)&&this.setPersonProperties(b,c),a!==d&&(this.reloadFeatureFlags(),this.unregister(a3))}}else av.critical('The string "'+bc+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else av.error("Unique user id has not been set in posthog.identify")}setPersonProperties(a,b){if((a||b)&&this.zr("posthog.setPersonProperties")){var c=d1(this.get_distinct_id(),a,b);this.wr!==c?(this.setPersonPropertiesForFlags(r({},b||{},a||{})),this.capture("$set",{$set:a||{},$set_once:b||{}}),this.wr=c):av.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(a,b,c){if(a&&b){if(this.zr("posthog.group")){var d=this.getGroups();d[a]!==b&&this.resetGroupPropertiesForFlags(a),this.register({$groups:r({},d,{[a]:b})}),c&&(this.capture("$groupidentify",{$group_type:a,$group_key:b,$group_set:c}),this.setGroupPropertiesForFlags({[a]:c})),d[a]===b||c||this.reloadFeatureFlags()}}else av.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(a,b){void 0===b&&(b=!0),this.featureFlags.setPersonPropertiesForFlags(a,b)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(a,b){void 0===b&&(b=!0),this.zr("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(a,b)}resetGroupPropertiesForFlags(a){this.featureFlags.resetGroupPropertiesForFlags(a)}reset(a){if(av.info("reset"),!this.__loaded)return av.uninitializedWarning("posthog.reset");var b,c,d,e,f=this.get_property("$device_id");if(this.consent.reset(),null==(b=this.persistence)||b.clear(),null==(c=this.sessionPersistence)||c.clear(),this.surveys.reset(),this.featureFlags.reset(),null==(d=this.persistence)||d.set_property(a4,"anonymous"),null==(e=this.sessionManager)||e.resetSessionId(),this.wr=null,"always"===this.config.cookieless_mode)this.register_once({distinct_id:bc,$device_id:null},"");else{var g=this.config.get_device_id(bS());this.register_once({distinct_id:g,$device_id:a?g:f},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var a,b;return null!=(a=null==(b=this.sessionManager)?void 0:b.checkAndGetSessionAndWindowId(!0).sessionId)?a:""}get_session_replay_url(a){if(!this.sessionManager)return"";var{sessionId:b,sessionStartTimestamp:c}=this.sessionManager.checkAndGetSessionAndWindowId(!0),d=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+b);if(null!=a&&a.withTimestamp&&c){var e,f=null!=(e=a.timestampLookBack)?e:10;if(!c)return d;d+="?t="+Math.max(Math.floor(((new Date).getTime()-c)/1e3)-f,0)}return d}alias(a,b){return a===this.get_property(aK)?(av.critical("Attempting to create alias for existing People user - aborting."),-2):this.zr("posthog.alias")?(H(b)&&(b=this.get_distinct_id()),a!==b?(this.Hr(aL,a),this.capture("$create_alias",{alias:a,distinct_id:b})):(av.warn("alias matches current distinct_id - skipping api call."),this.identify(a),-1)):void 0}set_config(a){var b=r({},this.config);if(F(a)){aC(this.config,e$(a));var c,d,e,f,g,h=this.kr();null==(c=this.persistence)||c.update_config(this.config,b,h),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new eg(r({},this.config,{persistence:"sessionStorage"}),h);var i=this.$r(this.config.debug);N(i)&&(this.config.debug=i),N(this.config.debug)&&(this.config.debug?(o.DEBUG=!0,bY.H()&&bY.G("ph_debug","true"),av.info("set_config",{config:a,oldConfig:b,newConfig:r({},this.config)})):(o.DEBUG=!1,bY.H()&&bY.V("ph_debug"))),null==(d=this.sessionRecording)||d.startIfEnabledOrStop(),null==(e=this.autocapture)||e.startIfEnabled(),null==(f=this.heatmaps)||f.startIfEnabled(),this.surveys.loadIfEnabled(),this.Br(),null==(g=this.externalIntegrations)||g.startIfEnabledOrStop()}}startSessionRecording(a){var b,c,d,e,f,g=!0===a,h={sampling:g||!(null==a||!a.sampling),linked_flag:g||!(null==a||!a.linked_flag),url_trigger:g||!(null==a||!a.url_trigger),event_trigger:g||!(null==a||!a.event_trigger)};Object.values(h).some(Boolean)&&(null==(b=this.sessionManager)||b.checkAndGetSessionAndWindowId(),h.sampling&&(null==(c=this.sessionRecording)||c.overrideSampling()),h.linked_flag&&(null==(d=this.sessionRecording)||d.overrideLinkedFlag()),h.url_trigger&&(null==(e=this.sessionRecording)||e.overrideTrigger("url")),h.event_trigger&&(null==(f=this.sessionRecording)||f.overrideTrigger("event"))),this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var a;return!(null==(a=this.sessionRecording)||!a.started)}captureException(a,b){var c=Error("PostHog syntheticException"),d=this.exceptions.buildProperties(a,{handled:!0,syntheticException:c});return this.exceptions.sendExceptionEvent(r({},d,b))}loadToolbar(a){return this.toolbar.loadToolbar(a)}get_property(a){var b;return null==(b=this.persistence)?void 0:b.props[a]}getSessionProperty(a){var b;return null==(b=this.sessionPersistence)?void 0:b.props[a]}toString(){var a,b=null!=(a=this.config.name)?a:eX;return b!==eX&&(b=eX+"."+b),b}_isIdentified(){var a,b;return"identified"===(null==(a=this.persistence)?void 0:a.get_property(a4))||"identified"===(null==(b=this.sessionPersistence)?void 0:b.get_property(a4))}Ur(){var a,b;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&G(this.getGroups())&&(null==(a=this.persistence)||null==(a=a.props)||!a[aL])&&(null==(b=this.persistence)||null==(b=b.props)||!b[ba]))}jr(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&(!0===this.config.capture_pageview||"history_change"===this.config.capture_pageview)}createPersonProfile(){this.Ur()||this.zr("posthog.createPersonProfile")&&this.setPersonProperties({},{})}zr(a){return"never"===this.config.person_profiles?(av.error(a+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.Hr(ba,!0),!0)}kr(){if("always"===this.config.cookieless_mode)return!0;var a=this.consent.isOptedOut(),b=this.config.opt_out_persistence_by_default||"on_reject"===this.config.cookieless_mode;return this.config.disable_persistence||a&&!!b}Br(){var a,b,c,d,e=this.kr();return(null==(a=this.persistence)?void 0:a.wi)!==e&&(null==(c=this.persistence)||c.set_disabled(e)),(null==(b=this.sessionPersistence)?void 0:b.wi)!==e&&(null==(d=this.sessionPersistence)||d.set_disabled(e)),e}opt_in_capturing(a){if("always"!==this.config.cookieless_mode){var b,c;"on_reject"===this.config.cookieless_mode&&this.consent.isExplicitlyOptedOut()&&(this.reset(!0),null==(b=this.sessionManager)||b.destroy(),this.sessionManager=new eF(this),this.persistence&&(this.sessionPropsManager=new eD(this,this.sessionManager,this.persistence)),this.sessionRecording=new eU(this),this.sessionRecording.startIfEnabledOrStop()),this.consent.optInOut(!0),this.Br(),this.Ar(),"on_reject"==this.config.cookieless_mode&&this.surveys.loadIfEnabled(),(H(null==a?void 0:a.captureEventName)||null!=a&&a.captureEventName)&&this.capture(null!=(c=null==a?void 0:a.captureEventName)?c:"$opt_in",null==a?void 0:a.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Dr()}else av.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}opt_out_capturing(){var a,b;"always"!==this.config.cookieless_mode?("on_reject"===this.config.cookieless_mode&&this.consent.isOptedIn()&&this.reset(!0),this.consent.optInOut(!1),this.Br(),"on_reject"===this.config.cookieless_mode&&(this.register({distinct_id:bc,$device_id:null}),null==(a=this.sessionManager)||a.destroy(),this.sessionManager=void 0,this.sessionPropsManager=void 0,null==(b=this.sessionRecording)||b.stopRecording(),this.sessionRecording=void 0,this.Dr())):av.warn('Consent opt in/out is not valid with cookieless_mode="always" and will be ignored')}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}get_explicit_consent_status(){var a=this.consent.consent;return a===b3.GRANTED?"granted":a===b3.DENIED?"denied":"pending"}is_capturing(){return"always"===this.config.cookieless_mode||("on_reject"===this.config.cookieless_mode?this.consent.isExplicitlyOptedOut()||this.consent.isOptedIn():!this.has_opted_out_capturing())}clear_opt_in_out_capturing(){this.consent.reset(),this.Br()}_is_bot(){return g?eJ(g,this.config.custom_blocked_useragents):void 0}Dr(){h&&("visible"===h.visibilityState?this.mr||(this.mr=!0,this.capture("$pageview",{title:h.title},{send_instantly:!0}),this.yr&&(h.removeEventListener("visibilitychange",this.yr),this.yr=null)):this.yr||(this.yr=this.Dr.bind(this),aJ(h,"visibilitychange",this.yr)))}debug(a){!1===a?(null==b||b.console.log("You've disabled debug mode."),this.set_config({debug:!1})):(null==b||b.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),this.set_config({debug:!0}))}M(){var a,b,c,d,e=this.Sr||{};return"advanced_disable_flags"in e?!!e.advanced_disable_flags:!1!==this.config.advanced_disable_flags?!!this.config.advanced_disable_flags:!0===this.config.advanced_disable_decide?(av.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(b="advanced_disable_decide",c=(a="advanced_disable_flags")in e&&!H(e[a]),d=b in e&&!H(e[b]),c?e[a]:!!d&&(av&&av.warn("Config field '"+b+"' is deprecated. Please use '"+a+"' instead. The old field will be removed in a future major version."),e[b]))}Nr(a){if(L(this.config.before_send))return a;var b=D(this.config.before_send)?this.config.before_send:[this.config.before_send],c=a;for(var d of b){if(L(c=d(c))){var e="Event '"+a.event+"' was rejected in beforeSend function";return O(a.event)?av.warn(e+". This can cause unexpected behavior."):av.info(e),null}c.properties&&!G(c.properties)||av.warn("Event '"+a.event+"' has no properties after beforeSend function, this is likely an error.")}return c}getPageViewId(){var a;return null==(a=this.pageViewManager.Vt)?void 0:a.pageViewId}captureTraceFeedback(a,b){this.capture("$ai_feedback",{$ai_trace_id:String(a),$ai_feedback_text:b})}captureTraceMetric(a,b,c){this.capture("$ai_metric",{$ai_trace_id:String(a),$ai_metric_name:b,$ai_metric_value:String(c)})}$r(a){var b=N(a)&&!a,c=bY.H()&&"true"===bY.q("ph_debug");return!b&&(!!c||a)}}for(var e1=["identify"],e2=0;e2<e1.length;e2++)e0.prototype[e1[e2]]=aF(e0.prototype[e1[e2]]);var e3,e4,e5,e6,e7,e8,e9,fa,fb,fc,fd,fe,ff,fg,fh=(fg=eV[eX]=new e0,function(){function a(){a.done||(a.done=!0,eY=!1,aB(eV,function(a){a._dom_loaded()}))}null!=h&&h.addEventListener?"complete"===h.readyState?a():aJ(h,"DOMContentLoaded",a,{capture:!1}):b&&av.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),fg);a.s(["default",()=>fh])}];

//# sourceMappingURL=5c022_posthog-js_dist_module_fb49c0be.js.map