module.exports=[4367,a=>{"use strict";var b=a.i(17188),c=a.i(68407),d=a.i(66083),e=a.i(86377),f=a.i(32921),g=a.i(29671),h=a.i(31640),i=a.i(83442),j=a.i(980),k=a.i(97895);function l({items:a,relationships:d=[],onItemClick:e,onItemFavorite:f,className:h}){let l=(0,c.useRef)(null),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(new Map),[q,r]=(0,c.useState)(null);(0,c.useEffect)(()=>{if(l.current&&a.length>0){let b=l.current,c=b.offsetWidth,d=b.offsetHeight,e=new Map;a.forEach((a,b)=>{a.x&&a.y?e.set(a.id,{x:a.x,y:a.y}):e.set(a.id,{x:200+Math.random()*(c-400),y:200+Math.random()*(d-400)})}),p(e)}},[a]);let s=()=>{r(null)},t=m?d.filter(a=>a.from===m||a.to===m):d;return(0,b.jsxs)("div",{ref:l,className:(0,k.cn)("relative w-full h-[600px] md:h-[800px] overflow-hidden rounded-lg border border-[var(--klutr-outline)]/20 bg-background",h),onMouseMove:a=>{if(!q||!l.current)return;let b=l.current.getBoundingClientRect(),c=a.clientX-b.left,d=a.clientY-b.top;p(a=>{let b=new Map(a);return b.get(q)&&b.set(q,{x:c,y:d}),b})},onMouseUp:s,onMouseLeave:s,children:[(0,b.jsxs)("svg",{className:"absolute inset-0 pointer-events-none z-0",style:{width:"100%",height:"100%"},children:[(0,b.jsx)("defs",{children:(0,b.jsx)("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",children:(0,b.jsx)("polygon",{points:"0 0, 10 3, 0 6",fill:"var(--klutr-coral)",opacity:"0.5"})})}),t.map((a,c)=>{var d,e;let f,g;if(d=a.from,e=a.to,f=o.get(d),g=o.get(e),!f||!g||(g.x,f.x,g.y,f.y,!`M ${f.x} ${f.y} L ${g.x} ${g.y}`))return null;let h=m&&(a.from===m||a.to===m),i=a.strength||.5;return(0,b.jsx)("line",{x1:o.get(a.from)?.x||0,y1:o.get(a.from)?.y||0,x2:o.get(a.to)?.x||0,y2:o.get(a.to)?.y||0,stroke:"var(--klutr-coral)",strokeWidth:h?3:1+i,opacity:h?.8:.3,strokeDasharray:a.strength&&a.strength<.5?"5,5":"0"},`${a.from}-${a.to}-${c}`)})]}),(0,b.jsx)(j.AnimatePresence,{children:a.map(a=>{let c,h=o.get(a.id);if(!h)return null;let j=(c=a.id,d.filter(a=>a.from===c||a.to===c).map(a=>a.from===c?a.to:a.from)),l=m===a.id,p=m&&j.includes(m);return(0,b.jsx)(i.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:l?1:p?.9:.7,scale:l?1.05:1,x:h.x,y:h.y},exit:{opacity:0,scale:.8},transition:{duration:.2},className:"absolute top-0 left-0 w-64 z-10 cursor-move",style:{transform:"translate(-50%, -50%)"},onMouseDown:b=>{var c;return c=a.id,void(b.preventDefault(),r(c))},onClick:()=>{n(l?null:a.id),e?.(a.id)},children:(0,b.jsx)("div",{className:(0,k.cn)("transition-all",l&&"ring-2 ring-[var(--klutr-coral)] ring-offset-2 rounded-lg",p&&"ring-1 ring-[var(--klutr-mint)] ring-offset-1 rounded-lg"),children:(0,b.jsx)(g.ItemCard,{title:a.title,description:a.description,tags:a.tags,pinned:a.pinned,onClick:()=>{n(l?null:a.id),e?.(a.id)},onFavorite:()=>f?.(a.id),variant:"grid"})})},a.id)})}),0===a.length&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground",children:(0,b.jsxs)("p",{className:"text-center",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Pin Board View"}),(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-sm",children:"Drag notes to organize them. Click to see connections."})]})})]})}var m=a.i(74727),n=a.i(87553),o=a.i(49556),p=a.i(39288),q=a.i(12769),r=a.i(96739),s=a.i(53364),t=a.i(40695),u=a.i(17177);function v(){let[a,i]=(0,c.useState)(u.mockClusters),[j,k]=(0,c.useState)("grid"),[v,w]=(0,c.useState)(""),x=(0,c.useRef)(null),y=(0,c.useRef)(null),z=(0,r.useSectionTour)("mindstorm",(0,s.getDialogTourSteps)("mindstorm"),{autoStart:!0}),A=(0,q.useSectionOnboarding)({section:"mindstorm",steps:(0,s.getOnboardingSteps)("mindstorm").map((a,b)=>0===b?{...a,targetRef:x}:1===b?{...a,targetRef:y}:a),autoTrigger:!1}),B=()=>{d.default.capture("mindstorm-recluster-clicked"),console.log("TODO: Recluster notes")},C=a=>{console.log("TODO: Open cluster",a)},D=b=>{console.log("TODO: Toggle favorite for cluster",b),i(a.map(a=>a.id===b?{...a,pinned:!a.pinned}:a))},E=a.map((b,c)=>{let d=(c+1)%a.length;return{from:b.id,to:a[d].id,strength:.6}}),F=v?a.filter(a=>a.title.toLowerCase().includes(v.toLowerCase())||a.description?.toLowerCase().includes(v.toLowerCase())||a.tags?.some(a=>a.label.toLowerCase().includes(v.toLowerCase()))):a;return(0,b.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,b.jsx)(e.PageHeader,{title:"MindStorm",description:"Your thoughts grouped by theme.",actions:(0,b.jsxs)(b.Fragment,{children:[!A.active&&!z.open&&(0,b.jsx)(t.Button,{variant:"outline",size:"sm",onClick:()=>z.startTour(),children:"Take tour"}),(0,b.jsx)(()=>(0,b.jsxs)(t.Button,{ref:y,variant:"outline",size:"sm",onClick:B,"aria-label":"Re-cluster notes now","data-onboarding":"recluster-button",className:"relative",children:["Re-cluster now",A.active&&A.currentStep&&1===A.step&&(0,b.jsx)(o.TourCallout,{title:A.currentStep.title,description:A.currentStep.description,position:A.currentStep.position,onNext:A.nextStep,onClose:A.endOnboarding,showNext:!A.isLastStep})]}),{})]})}),(0,b.jsx)(p.SectionTourDialog,{title:"Welcome to MindStorm",subtitle:"AI groups your notes by theme automatically",accent:"indigo",tour:z}),(0,b.jsx)(n.SectionSummary,{section:"mindstorm",summary:"AI groups your notes by theme automatically. Related ideas cluster together as you add more notes."}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[(0,b.jsx)("div",{className:"flex-1 w-full",children:(0,b.jsx)(m.SearchBar,{value:v,onChange:w,placeholder:"Search clusters..."})}),(0,b.jsx)(h.ViewToggle,{view:j,onViewChange:a=>{d.default.capture("mindstorm-view-changed",{view:a}),k(a)},availableViews:["grid","list","collage","pinboard"]})]}),(0,b.jsx)("div",{ref:x,"data-onboarding":"clusters",className:"relative",children:A.active&&A.currentStep&&0===A.step&&(0,b.jsx)(o.TourCallout,{title:A.currentStep.title,description:A.currentStep.description,position:A.currentStep.position,onNext:A.nextStep,onClose:A.endOnboarding,showNext:!A.isLastStep})}),"pinboard"===j?(0,b.jsx)(l,{items:F,relationships:E,onItemClick:C,onItemFavorite:D}):(0,b.jsx)(f.CardGrid,{view:j,children:F.map(a=>(0,b.jsx)(g.ItemCard,{title:a.title,description:a.description,tags:a.tags,pinned:a.pinned,onClick:()=>C(a.id),onFavorite:()=>D(a.id),variant:j},a.id))}),0===F.length&&(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:(0,b.jsx)("p",{children:v?"No clusters match your search. Try a different query.":"No clusters yet. Add some notes to see them grouped automatically."})})]})}a.s(["default",()=>v],4367)}];

//# sourceMappingURL=app_%28app%29_mindstorm_page_tsx_e6535b6d._.js.map