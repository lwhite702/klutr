(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38776,e=>{"use strict";var t=e.i(96243),a=e.i(93221),s=e.i(99765),r=e.i(67881),l=e.i(23750);function n(){let[e,n]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),{runSpark:d,loading:c,response:u,error:p,clearResponse:b}=function(){let[e,t]=(0,a.useState)(!1),[s,r]=(0,a.useState)(""),[l,n]=(0,a.useState)(null);return{loading:e,response:s,error:l,runSpark:async function e(e,a){if(!e||!a)return void n("Note ID and prompt are required");t(!0),r(""),n(null);try{let t=await fetch("/api/spark",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({noteId:e,prompt:a})});if(!t.ok){let e=await t.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||`HTTP ${t.status}`)}if(!t.body)throw Error("Response body is null");let s=t.body.getReader(),l=new TextDecoder;for(;;){let{done:e,value:t}=await s.read();if(e)break;let a=l.decode(t,{stream:!0});r(e=>e+a)}}catch(e){n(e instanceof Error?e.message:"Failed to run Spark"),console.error("[useSpark] Error:",e)}finally{t(!1)}},clearResponse:function(){r(""),n(null)}}}(),m=async t=>{t.preventDefault(),e&&o&&await d(e,o)};return(0,t.jsx)(s.AppShell,{activeRoute:"/app/spark",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto py-12 px-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-display text-[#ff6b6b] mb-6",children:"Spark"}),(0,t.jsx)("p",{className:"text-slate-400 font-body mb-8",children:"Your contextual AI partner. Analyze and expand on your notes with thoughtful insights."}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-4 mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"noteId",className:"block text-sm font-medium text-foreground mb-2",children:"Note ID"}),(0,t.jsx)(l.Input,{id:"noteId",type:"text",placeholder:"Enter note ID...",value:e,onChange:e=>n(e.target.value),disabled:c,className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-medium text-foreground mb-2",children:"Ask Spark"}),(0,t.jsx)(l.Input,{id:"prompt",type:"text",placeholder:"What would you like to explore about this note?",value:o,onChange:e=>i(e.target.value),disabled:c,className:"w-full"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Button,{type:"submit",disabled:c||!e||!o,className:"bg-[#ff6b6b] hover:bg-[#ff6b6b]/90 text-white",children:c?"Thinking...":"Run Spark"}),(u||p)&&(0,t.jsx)(r.Button,{type:"button",variant:"outline",onClick:b,disabled:c,children:"Clear"})]})]}),p&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-destructive/10 border border-destructive/20 rounded-md",children:(0,t.jsx)("p",{className:"text-destructive text-sm",children:p})}),u&&(0,t.jsxs)("div",{className:"mt-6 p-6 bg-slate-900/50 border border-slate-700 rounded-lg",children:[(0,t.jsx)("h2",{className:"text-lg font-display text-[#ff6b6b] mb-3",children:"Response"}),(0,t.jsxs)("div",{className:"text-slate-300 font-body whitespace-pre-line leading-relaxed",children:[u,c&&(0,t.jsx)("span",{className:"inline-block w-2 h-4 bg-[#ff6b6b] ml-1 animate-pulse"})]})]})]})})}e.s(["default",()=>n],38776)}]);